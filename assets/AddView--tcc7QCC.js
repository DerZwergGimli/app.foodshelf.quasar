import{Q as X,a as B}from"./QTabPanels-DwsemtGs.js";import{j as v,i as Y,f as D}from"./QDialog-BHtk-kzV.js";import{d as g,r as p,N as U,O as y,U as r,f as l,P as d,X as b,V as Z,Z as s,l as G,g as K,c as M,ag as J,p as L,I as ee,h as f,x as $,Y as C,ad as q,ah as h,w as te,o as ae,af as le,_ as oe,ae as ne,S as O,ai as ue}from"./index-DSCB0vmy.js";import{Q as E}from"./use-panel-jQsHLSDr.js";import{e as re}from"./date-MTojS5SI.js";import{Q as H}from"./QTable-C9mMFxFm.js";import{_ as ie}from"./CreateItem.vue_vue_type_script_setup_true_lang-DN-8uR5H.js";const de=g({__name:"CreateGroup",setup(e){const n=p(""),u=p("");async function o(){await s().createGroup({name:n.value,description:u.value,created_at:new Date,user_id:s().user_id}),console.log("Group Created:",{name:n.value,description:u.value})}return(t,a)=>(y(),U(d(E),{onSubmit:Z(o,["prevent"]),class:"q-gutter-y-md"},{default:r(()=>[l(d(v),{dense:"",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=i=>n.value=i),label:"Group Name",outlined:"",maxlength:"100",autofocus:""},null,8,["modelValue"]),l(d(v),{dense:"",modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=i=>u.value=i),label:"Group Description",outlined:"",type:"text",maxlength:"500",autofocus:""},null,8,["modelValue"]),l(d(b),{class:"full-width",label:"Create Group",type:"submit",color:"primary"})]),_:1}))}}),se=g({__name:"CreateTag",setup(e){const n=p({name:"",description:"",created_at:new Date,user_id:s().user_id});return(u,o)=>(y(),U(d(Y),null,{default:r(()=>[l(d(E),{class:"q-gutter-y-md"},{default:r(()=>[l(d(v),{dense:"",outlined:"",modelValue:n.value.name,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value.name=t),label:"Tag Name",required:"",autofocus:""},null,8,["modelValue"]),l(d(v),{dense:"",outlined:"",modelValue:n.value.description,"onUpdate:modelValue":o[1]||(o[1]=t=>n.value.description=t),label:"Tag Description",type:"text",autofocus:""},null,8,["modelValue"]),l(d(b),{class:"full-width",onClick:o[2]||(o[2]=t=>d(s)().createTag(n.value)),type:"submit",label:"Create Tag",color:"primary"})]),_:1})]),_:1}))}});function V(e,n=new WeakMap){if(Object(e)!==e)return e;if(n.has(e))return n.get(e);const u=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const o=e.valueOf();if(Object(o)!==o){const t=new e.constructor(o);return n.set(e,t),t}}return n.set(e,u),e instanceof Set?e.forEach(o=>{u.add(V(o,n))}):e instanceof Map&&e.forEach((o,t)=>{u.set(t,V(o,n))}),Object.assign(u,...Object.keys(e).map(o=>({[o]:V(e[o],n)})))}const T=G({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:u}){const{proxy:o}=K(),{$q:t}=o,a=p(null),i=p(""),c=p("");let k=!1;const I=M(()=>J({initialValue:i.value,validate:e.validate,set:x,cancel:S,updatePosition:P},"value",()=>c.value,m=>{c.value=m}));function x(){e.validate(c.value)!==!1&&(Q()===!0&&(u("save",c.value,i.value),u("update:modelValue",c.value)),j())}function S(){Q()===!0&&u("cancel",c.value,i.value),j()}function P(){L(()=>{a.value.updatePosition()})}function Q(){return ee(c.value,i.value)===!1}function j(){k=!0,a.value.hide()}function A(){k=!1,i.value=V(e.modelValue),c.value=V(e.modelValue),u("beforeShow")}function R(){u("show")}function W(){k===!1&&Q()===!0&&(e.autoSave===!0&&e.validate(c.value)===!0?(u("save",c.value,i.value),u("update:modelValue",c.value)):u("cancel",c.value,i.value)),u("beforeHide")}function F(){u("hide")}function z(){const m=n.default!==void 0?[].concat(n.default(I.value)):[];return e.title&&m.unshift(f("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&m.push(f("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[f(b,{flat:!0,color:e.color,label:e.labelCancel||t.lang.label.cancel,onClick:S}),f(b,{flat:!0,color:e.color,label:e.labelSet||t.lang.label.set,onClick:x})])),m}return Object.assign(o,{set:x,cancel:S,show(m){var w;(w=a.value)==null||w.show(m)},hide(m){var w;(w=a.value)==null||w.hide(m)},updatePosition:P}),()=>{if(e.disable!==!0)return f(re,{ref:a,class:"q-popup-edit",cover:e.cover,onBeforeShow:A,onShow:R,onBeforeHide:W,onHide:F,onEscapeKey:S},z)}}}),_=G({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:n}){const u=K(),o=M(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return f("td",{class:o.value},$(n.default));const t=u.vnode.key,a=(e.props.colsMap!==void 0?e.props.colsMap[t]:null)||e.props.col;if(a===void 0)return;const{row:i}=e.props;return f("td",{class:o.value+a.__tdClass(i),style:a.__tdStyle(i)},$(n.default))}}}),N=G({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:n}){const u=M(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>{var o;return f("tr",{style:(o=e.props)==null?void 0:o.__trStyle,class:u.value},$(n.default))}}}),ce=g({__name:"TableTags",setup(e){const n=[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"description",required:!0,align:"left",label:"Description",field:"description",sortable:!0},{name:"button",required:!0,label:"",field:"button"}];return(u,o)=>(y(),U(H,{flat:"",rows:d(s)().tags,columns:n,"row-key":"name","hide-bottom":"","rows-per-page-options":[0],pagination:{rowsPerPage:0},"binary-state-sort":""},{body:r(t=>[l(N,{props:t},{default:r(()=>[l(_,{key:"name",props:t},{default:r(()=>[C(q(t.row.name)+" ",1),l(T,{modelValue:t.row.name,"onUpdate:modelValue":a=>t.row.name=a,onSave:a=>d(s)().updateTag(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,dense:"",autofocus:"",counter:"",onKeyup:h(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(_,{key:"description",props:t},{default:r(()=>[C(q(t.row.description)+" ",1),l(T,{modelValue:t.row.description,"onUpdate:modelValue":a=>t.row.description=a,onSave:a=>d(s)().updateTag(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,dense:"",autofocus:"",counter:"",onKeyup:h(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(_,{key:"description",props:t},{default:r(()=>[l(b,{onClick:a=>d(s)().deleteTag(t.row.id),icon:"delete",flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]))}}),me=g({__name:"TableGroups",setup(e){const n=[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"description",required:!0,align:"left",label:"Description",field:"description",sortable:!0},{name:"button",required:!0,label:"",field:"button"}];return(u,o)=>(y(),U(H,{flat:"",rows:d(s)().groups,columns:n,"row-key":"name","hide-bottom":"","rows-per-page-options":[0],pagination:{rowsPerPage:0},"binary-state-sort":""},{body:r(t=>[l(N,{props:t},{default:r(()=>[l(_,{key:"name",props:t},{default:r(()=>[C(q(t.row.name)+" ",1),l(T,{modelValue:t.row.name,"onUpdate:modelValue":a=>t.row.name=a,onSave:a=>d(s)().updateGroup(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,dense:"",autofocus:"",counter:"",onKeyup:h(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(_,{key:"description",props:t},{default:r(()=>[C(q(t.row.description)+" ",1),l(T,{modelValue:t.row.description,"onUpdate:modelValue":a=>t.row.description=a,onSave:a=>d(s)().updateGroup(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,dense:"",autofocus:"",counter:"",onKeyup:h(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(_,{key:"description",props:t},{default:r(()=>[l(b,{onClick:a=>d(s)().deleteGroup(t.row.id),icon:"delete",flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]))}}),ge=g({__name:"AddView",setup(e){return te(()=>s().isSignedIn,async()=>{await s().fetchAll()}),ae(()=>{s().item_selected=le}),(n,u)=>(y(),oe("div",{class:ne(d(ue)().screen.gt.sm?"q-pa-md":"q-pa-none")},[l(D,{flat:"",style:{"max-width":"600px",margin:"auto"}},{default:r(()=>[l(X,{modelValue:d(O)().addActiveTab,"onUpdate:modelValue":u[0]||(u[0]=o=>d(O)().addActiveTab=o),animated:""},{default:r(()=>[l(B,{name:"item"},{default:r(()=>[l(ie)]),_:1}),l(B,{name:"group"},{default:r(()=>[l(D,{flat:""},{default:r(()=>[l(de),l(me)]),_:1})]),_:1}),l(B,{name:"tag"},{default:r(()=>[l(D,{flat:""},{default:r(()=>[l(se),l(ce)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],2))}});export{ge as default};
