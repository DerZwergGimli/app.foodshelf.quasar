import{l as P,g as ae,a as ie,t as N,u as ye,z as Se,c as f,h as u,x as U,r as L,k as _e,o as we,a8 as ce,a9 as xe,w as E,aa as X,m as de,ab as qe,a3 as ge,D as Te,ac as Ie,Q as J,H as Ce,d as fe,N as ee,O as H,U as q,f as m,P as B,Z as z,S as te,W as x,ad as F,ae as ke,Y as le,_ as ne,X as j,F as Le,a5 as Be}from"./index-DSCB0vmy.js";import{e as oe,k as Qe,l as $e,m as pe,n as De,o as Ne,p as He,u as ze,h as M,f as re,i as je,j as me}from"./QDialog-BHtk-kzV.js";import{Q as Ee,a as se,b as Z,c as ue,d as Pe}from"./date-MTojS5SI.js";import{Q as Oe}from"./QTable-C9mMFxFm.js";const Ae=P({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:s}){const{proxy:{$q:o}}=ae(),t=ie(ye,N);if(t===N)return console.error("QPage needs to be a deep child of QLayout"),N;if(ie(Se,N)===N)return console.error("QPage needs to be child of QPageContainer"),N;const c=f(()=>{const r=(t.header.space===!0?t.header.size:0)+(t.footer.space===!0?t.footer.size:0);if(typeof e.styleFn=="function"){const h=t.isContainer.value===!0?t.containerHeight.value:o.screen.height;return e.styleFn(r,h)}return{minHeight:t.isContainer.value===!0?t.containerHeight.value-r+"px":o.screen.height===0?r!==0?`calc(100vh - ${r}px)`:"100vh":o.screen.height-r+"px"}}),n=f(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>u("main",{class:n.value,style:c.value},U(s.default))}}),Re={ratio:[String,Number]};function Ve(e,s){return f(()=>{const o=Number(e.ratio||(s!==void 0?s.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const Fe=1.7778,Me=P({name:"QImg",props:{...Re,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Fe},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:s,emit:o}){const t=L(e.initialRatio),d=Ve(e,t),c=ae(),{registerTimeout:n,removeTimeout:r}=oe(),{registerTimeout:h,removeTimeout:T}=oe(),y=f(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),v=f(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),g=[L(null),L(y.value)],S=L(0),k=L(!1),a=L(!1),b=f(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),_=f(()=>({width:e.width,height:e.height})),w=f(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),Y=f(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function K(){if(T(),e.loadingShowDelay===0){k.value=!0;return}h(()=>{k.value=!0},e.loadingShowDelay)}function p(){T(),k.value=!1}function G({target:l}){X(c)===!1&&(r(),t.value=l.naturalHeight===0?.5:l.naturalWidth/l.naturalHeight,O(l,1))}function O(l,I){I===1e3||X(c)===!0||(l.complete===!0?A(l):n(()=>{O(l,I+1)},50))}function A(l){X(c)!==!0&&(S.value=S.value^1,g[S.value].value=null,p(),l.getAttribute("__qerror")!=="true"&&(a.value=!1),o("load",l.currentSrc||l.src))}function W(l){r(),p(),a.value=!0,g[S.value].value=v.value,g[S.value^1].value=y.value,o("error",l)}function R(l){const I=g[l].value,D={key:"img_"+l,class:w.value,style:Y.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...I};return S.value===l?Object.assign(D,{class:D.class+"current",onLoad:G,onError:W}):D.class+="loaded",u("div",{class:"q-img__container absolute-full",key:"img"+l},u("img",D))}function V(){return k.value===!1?u("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},U(s[a.value===!0?"error":"default"])):u("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},s.loading!==void 0?s.loading():e.noSpinner===!0?void 0:[u(xe,{color:e.spinnerColor,size:e.spinnerSize})])}{let l=function(){E(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,I=>{r(),a.value=!1,I===null?(p(),g[S.value^1].value=y.value):K(),g[S.value].value=I},{immediate:!0})};_e.value===!0?we(l):l()}return()=>{const l=[];return d.value!==null&&l.push(u("div",{key:"filler",style:d.value})),g[0].value!==null&&l.push(R(0)),g[1].value!==null&&l.push(R(1)),l.push(u(ce,{name:"q-transition--fade"},V)),u("div",{key:"main",class:b.value,style:_.value,role:"img","aria-label":e.alt},l)}}}),Ue=P({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:s}){const o=f(()=>{const t=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(d=>e[d]===!0).map(d=>`q-btn-group--${d}`).join(" ");return`q-btn-group row no-wrap${t.length!==0?" "+t:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>u("div",{class:o.value},U(s.default))}}),Ye=P({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:s,emit:o}){let t=!1,d,c,n=null,r=null,h,T;function y(){d==null||d(),d=null,t=!1,n!==null&&(clearTimeout(n),n=null),r!==null&&(clearTimeout(r),r=null),c==null||c.removeEventListener("transitionend",h),h=null}function v(a,b,_){b!==void 0&&(a.style.height=`${b}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,t=!0,d=_}function g(a,b){a.style.overflowY=null,a.style.height=null,a.style.transition=null,y(),b!==T&&o(b)}function S(a,b){let _=0;c=a,t===!0?(y(),_=a.offsetHeight===a.scrollHeight?0:void 0):(T="hide",a.style.overflowY="hidden"),v(a,_,b),n=setTimeout(()=>{n=null,a.style.height=`${a.scrollHeight}px`,h=w=>{r=null,(Object(w)!==w||w.target===a)&&g(a,"show")},a.addEventListener("transitionend",h),r=setTimeout(h,e.duration*1.1)},100)}function k(a,b){let _;c=a,t===!0?y():(T="show",a.style.overflowY="hidden",_=a.scrollHeight),v(a,_,b),n=setTimeout(()=>{n=null,a.style.height=0,h=w=>{r=null,(Object(w)!==w||w.target===a)&&g(a,"hide")},a.addEventListener("transitionend",h),r=setTimeout(h,e.duration*1.1)},100)}return de(()=>{t===!0&&y()}),()=>u(ce,{css:!1,appear:e.appear,onEnter:S,onLeave:k},s.default)}}),$=qe({}),Ke=Object.keys(ge),Ge=P({name:"QExpansionItem",props:{...ge,...pe,...$e,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Qe,"click","afterShow","afterHide"],setup(e,{slots:s,emit:o}){const{proxy:{$q:t}}=ae(),d=De(e,t),c=L(e.modelValue!==null?e.modelValue:e.defaultOpened),n=L(null),r=Ne(),{show:h,hide:T,toggle:y}=He({showing:c});let v,g;const S=f(()=>`q-expansion-item q-item-type q-expansion-item--${c.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),k=f(()=>e.contentInsetLevel===void 0?null:{["padding"+(t.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),a=f(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),b=f(()=>{const i={};return Ke.forEach(C=>{i[C]=e[C]}),i}),_=f(()=>a.value===!0||e.expandIconToggle!==!0),w=f(()=>e.expandedIcon!==void 0&&c.value===!0?e.expandedIcon:e.expandIcon||t.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),Y=f(()=>e.disable!==!0&&(a.value===!0||e.expandIconToggle===!0)),K=f(()=>({expanded:c.value===!0,detailsId:r.value,toggle:y,show:h,hide:T})),p=f(()=>{const i=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:t.lang.label[c.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":c.value===!0?"true":"false","aria-controls":r.value,"aria-label":i}});E(()=>e.group,i=>{g==null||g(),i!==void 0&&V()});function G(i){a.value!==!0&&y(i),o("click",i)}function O(i){i.keyCode===13&&A(i,!0)}function A(i,C){var Q;C!==!0&&i.qAvoidFocus!==!0&&((Q=n.value)==null||Q.focus()),y(i),Ce(i)}function W(){o("afterShow")}function R(){o("afterHide")}function V(){v===void 0&&(v=ze()),c.value===!0&&($[e.group]=v);const i=E(c,Q=>{Q===!0?$[e.group]=v:$[e.group]===v&&delete $[e.group]}),C=E(()=>$[e.group],(Q,be)=>{be===v&&Q!==void 0&&Q!==v&&T()});g=()=>{i(),C(),$[e.group]===v&&delete $[e.group],g=void 0}}function l(){const i={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},C=[u(J,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&c.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:w.value})];return Y.value===!0&&(Object.assign(i,{tabindex:0,...p.value,onClick:A,onKeyup:O}),C.unshift(u("div",{ref:n,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),u(Z,i,()=>C)}function I(){let i;return s.header!==void 0?i=[].concat(s.header(K.value)):(i=[u(Z,()=>[u(se,{lines:e.labelLines},()=>e.label||""),e.caption?u(se,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&i[e.switchToggleSide===!0?"push":"unshift"](u(Z,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>u(J,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&i[e.switchToggleSide===!0?"unshift":"push"](l()),i}function D(){const i={ref:"item",style:e.headerStyle,class:e.headerClass,dark:d.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return _.value===!0&&(i.clickable=!0,i.onClick=G,Object.assign(i,a.value===!0?b.value:p.value)),u(Ee,i,I)}function he(){return Te(u("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:k.value,id:r.value},U(s.default)),[[Ie,c.value]])}function ve(){const i=[D(),u(Ye,{duration:e.duration,onShow:W,onHide:R},he)];return e.expandSeparator===!0&&i.push(u(M,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:d.value}),u(M,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:d.value})),i}return e.group!==void 0&&V(),de(()=>{g==null||g()}),()=>u("div",{class:S.value},[u("div",{class:"q-expansion-item__container relative-position"},ve())])}});function We(e){const[s,o,t]=e.split("/").map(Number);return Date.UTC(s,o-1,t)}function Xe(e){const s=Date.now(),o=We(e),t=o-s;return console.log(s,o),console.log(t),t>365*24*60*60*1e3?"green":t>6*30*24*60*60*1e3?"orange":t>=0?"purple":"red"}const Ze={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Je={class:"col q-mx-xs"},et={class:"row full-width"},tt={class:"col"},nt={class:"q-ma-none"},at={class:"col text-right"},it={class:"col"},lt={class:""},ot={key:1,class:"row full-width q-pa-xs"},rt={class:"absolute-top-left",style:{top:"-5px",left:"-15px"}},st=fe({__name:"TableItems",props:["group","filter"],setup(e){const s=e,o=[{name:"image",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"image"},{name:"name",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"name"},{name:"bestTil",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"date_expire"}];function t(d){return Pe.formatDate(d,"DD-MM-YYYY")}return(d,c)=>(H(),ee(re,{flat:""},{default:q(()=>[m(Ge,{class:"text-h6 full-width",label:s.group.name,caption:s.group.description,"default-opened":"","expand-icon":"las la-angle-down","expanded-icon":"las la-angle-up"},{default:q(()=>[m(Oe,{"hide-bottom":"",grid:"",filter:B(te)().filter,flat:"",rows:B(z)().items.filter(n=>n.group_id===s.group.id),columns:o,"row-key":"name","hide-header":""},{item:q(n=>[x("div",Ze,[m(re,{bordered:"",flat:"",class:"full-height"},{default:q(()=>[m(je,{class:"row items-center",horizontal:""},{default:q(()=>[m(Me,{class:"col-2",height:"110px",fit:"cover",src:n.row.image},null,8,["src"]),m(M,{vertical:""}),x("div",Je,[x("div",et,[x("div",tt,[x("h5",nt,F(n.row.name),1),x("h6",{class:ke(["q-ma-none text-weight-thin",n.row.description?"":"text-transparent"])},F(n.row.description||"none"),3)]),x("div",at,[x("div",it,[m(ue,{outline:"",color:B(Xe)(n.row.date_expire),style:{"font-size":"11px"},class:""},{default:q(()=>[le(F(t(n.row.date_expire)),1)]),_:2},1032,["color"])]),x("div",lt,[m(ue,{style:{"font-size":"11px"}},{default:q(()=>[le(F(B(z)().getTagName(n.row.tag_id)),1)]),_:2},1024)])])]),x("div",null,[n.row.amount!=0?(H(),ee(Ue,{key:0,class:"row full-width"},{default:q(()=>[m(j,{dense:"",class:"q-px-md",color:"primary",icon:"las la-minus",onClick:r=>n.row.amount=Math.max((n.row.amount||0)-1,0)},null,8,["onClick"]),m(me,{standout:"",dense:"",square:"","input-class":"text-right",suffix:n.row.unit,modelValue:n.row.amount,"onUpdate:modelValue":r=>n.row.amount=r,type:"number",min:"0",class:"col",value:n.row.amount||0},null,8,["suffix","modelValue","onUpdate:modelValue","value"]),m(j,{dense:"",class:"q-px-md",color:"primary",icon:"las la-plus",onClick:r=>n.row.amount=(n.row.amount||0)+1},null,8,["onClick"])]),_:2},1024)):(H(),ne("div",ot,[m(j,{class:"col q-mr-md",color:"primary",label:"cancel",onClick:r=>n.row.amount=1},null,8,["onClick"]),m(j,{class:"col",color:"red",label:"delete",onClick:r=>B(z)().deleteItem(n.row.id)},null,8,["onClick"])]))])])]),_:2},1024),x("div",rt,[m(j,{flat:"",to:"/edit/"+n.row.id,class:"",icon:"las la-edit"},null,8,["to"])])]),_:2},1024)])]),_:1},8,["filter","rows"])]),_:1},8,["label","caption"])]),_:1}))}}),ft=fe({__name:"HomeView",setup(e){return E(()=>z().isSignedIn,async()=>{await z().fetchAll()}),(s,o)=>(H(),ee(Ae,{class:"q-gutter-y-md"},{default:q(()=>[m(me,{class:"q-pt-sm q-px-sm",outlined:"",dense:"",debounce:"300",modelValue:B(te)().filter,"onUpdate:modelValue":o[0]||(o[0]=t=>B(te)().filter=t),placeholder:"Search"},{append:q(()=>[m(J,{name:"search"})]),_:1},8,["modelValue"]),(H(!0),ne(Le,null,Be(B(z)().groups,(t,d)=>(H(),ne("div",{class:"col row",key:d},[m(M,{style:{width:"10px"},vertical:""}),m(st,{class:"col full-width",group:t},null,8,["group"])]))),128))]),_:1}))}});export{ft as default};
