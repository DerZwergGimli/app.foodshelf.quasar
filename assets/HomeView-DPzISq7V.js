import{l as H,g as Z,a as M,t as C,u as he,z as ve,c as f,h as c,x as z,m as J,a9 as be,aa as xe,a4 as ee,r as R,w as $,D as we,ab as _e,Q as A,H as ye,d as te,N,O as k,U as x,f as d,P as S,Y as Q,S as O,W as b,ac as L,ad as pe,a3 as K,Z as j,X as B,F as Se,a6 as qe}from"./index-CZbSlQss.js";import{k as Ie,l as Te,m as Ce,n as ke,o as Qe,p as Be,u as Le,h as D,f as G,i as $e,j as ne}from"./QDialog-CUPYD09d.js";import{Q as De}from"./QImg-_rTrXa_D.js";import{Q as He,a as W,b as V,c as X,d as Ee}from"./date-BSoGvmLU.js";import{Q as Pe}from"./QTable-iF_v4nT5.js";const Ve=H({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:s}){const{proxy:{$q:i}}=Z(),t=M(he,C);if(t===C)return console.error("QPage needs to be a deep child of QLayout"),C;if(M(ve,C)===C)return console.error("QPage needs to be child of QPageContainer"),C;const u=f(()=>{const l=(t.header.space===!0?t.header.size:0)+(t.footer.space===!0?t.footer.size:0);if(typeof e.styleFn=="function"){const g=t.isContainer.value===!0?t.containerHeight.value:i.screen.height;return e.styleFn(l,g)}return{minHeight:t.isContainer.value===!0?t.containerHeight.value-l+"px":i.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":i.screen.height-l+"px"}}),a=f(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>c("main",{class:a.value,style:u.value},z(s.default))}}),Ae=H({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:s}){const i=f(()=>{const t=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${t.length!==0?" "+t:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>c("div",{class:i.value},z(s.default))}}),Ne=H({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:s,emit:i}){let t=!1,r,u,a=null,l=null,g,T;function p(){r==null||r(),r=null,t=!1,a!==null&&(clearTimeout(a),a=null),l!==null&&(clearTimeout(l),l=null),u==null||u.removeEventListener("transitionend",g),g=null}function m(o,v,w){v!==void 0&&(o.style.height=`${v}px`),o.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,t=!0,r=w}function h(o,v){o.style.overflowY=null,o.style.height=null,o.style.transition=null,p(),v!==T&&i(v)}function E(o,v){let w=0;u=o,t===!0?(p(),w=o.offsetHeight===o.scrollHeight?0:void 0):(T="hide",o.style.overflowY="hidden"),m(o,w,v),a=setTimeout(()=>{a=null,o.style.height=`${o.scrollHeight}px`,g=_=>{l=null,(Object(_)!==_||_.target===o)&&h(o,"show")},o.addEventListener("transitionend",g),l=setTimeout(g,e.duration*1.1)},100)}function P(o,v){let w;u=o,t===!0?p():(T="show",o.style.overflowY="hidden",w=o.scrollHeight),m(o,w,v),a=setTimeout(()=>{a=null,o.style.height=0,g=_=>{l=null,(Object(_)!==_||_.target===o)&&h(o,"hide")},o.addEventListener("transitionend",g),l=setTimeout(g,e.duration*1.1)},100)}return J(()=>{t===!0&&p()}),()=>c(be,{css:!1,appear:e.appear,onEnter:E,onLeave:P},s.default)}}),I=xe({}),Oe=Object.keys(ee),je=H({name:"QExpansionItem",props:{...ee,...Ce,...Te,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ie,"click","afterShow","afterHide"],setup(e,{slots:s,emit:i}){const{proxy:{$q:t}}=Z(),r=ke(e,t),u=R(e.modelValue!==null?e.modelValue:e.defaultOpened),a=R(null),l=Qe(),{show:g,hide:T,toggle:p}=Be({showing:u});let m,h;const E=f(()=>`q-expansion-item q-item-type q-expansion-item--${u.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),P=f(()=>e.contentInsetLevel===void 0?null:{["padding"+(t.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),o=f(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),v=f(()=>{const n={};return Oe.forEach(y=>{n[y]=e[y]}),n}),w=f(()=>o.value===!0||e.expandIconToggle!==!0),_=f(()=>e.expandedIcon!==void 0&&u.value===!0?e.expandedIcon:e.expandIcon||t.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),ae=f(()=>e.disable!==!0&&(o.value===!0||e.expandIconToggle===!0)),oe=f(()=>({expanded:u.value===!0,detailsId:l.value,toggle:p,show:g,hide:T})),F=f(()=>{const n=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:t.lang.label[u.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":u.value===!0?"true":"false","aria-controls":l.value,"aria-label":n}});$(()=>e.group,n=>{h==null||h(),n!==void 0&&Y()});function le(n){o.value!==!0&&p(n),i("click",n)}function ie(n){n.keyCode===13&&U(n,!0)}function U(n,y){var q;y!==!0&&n.qAvoidFocus!==!0&&((q=a.value)==null||q.focus()),p(n),ye(n)}function se(){i("afterShow")}function re(){i("afterHide")}function Y(){m===void 0&&(m=Le()),u.value===!0&&(I[e.group]=m);const n=$(u,q=>{q===!0?I[e.group]=m:I[e.group]===m&&delete I[e.group]}),y=$(()=>I[e.group],(q,me)=>{me===m&&q!==void 0&&q!==m&&T()});h=()=>{n(),y(),I[e.group]===m&&delete I[e.group],h=void 0}}function ue(){const n={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},y=[c(A,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&u.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:_.value})];return ae.value===!0&&(Object.assign(n,{tabindex:0,...F.value,onClick:U,onKeyup:ie}),y.unshift(c("div",{ref:a,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),c(V,n,()=>y)}function ce(){let n;return s.header!==void 0?n=[].concat(s.header(oe.value)):(n=[c(V,()=>[c(W,{lines:e.labelLines},()=>e.label||""),e.caption?c(W,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&n[e.switchToggleSide===!0?"push":"unshift"](c(V,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>c(A,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&n[e.switchToggleSide===!0?"unshift":"push"](ue()),n}function de(){const n={ref:"item",style:e.headerStyle,class:e.headerClass,dark:r.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return w.value===!0&&(n.clickable=!0,n.onClick=le,Object.assign(n,o.value===!0?v.value:F.value)),c(He,n,ce)}function ge(){return we(c("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:P.value,id:l.value},z(s.default)),[[_e,u.value]])}function fe(){const n=[de(),c(Ne,{duration:e.duration,onShow:se,onHide:re},ge)];return e.expandSeparator===!0&&n.push(c(D,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:r.value}),c(D,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:r.value})),n}return e.group!==void 0&&Y(),J(()=>{h==null||h()}),()=>c("div",{class:E.value},[c("div",{class:"q-expansion-item__container relative-position"},fe())])}});function ze(e){const[s,i,t]=e.split("/").map(Number);return Date.UTC(s,i-1,t)}function Fe(e){const s=Date.now(),i=ze(e),t=i-s;return console.log(s,i),console.log(t),t>365*24*60*60*1e3?"green":t>6*30*24*60*60*1e3?"orange":t>=0?"purple":"red"}const Ue={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Ye={class:"col q-mx-xs"},Me={class:"row full-width"},Re={class:"col"},Ke={class:"q-ma-none"},Ge={class:"col text-right"},We={class:"col"},Xe={class:""},Ze={key:1,class:"row full-width q-pa-xs"},Je={class:"absolute-top-left",style:{top:"-5px",left:"-15px"}},et=te({__name:"TableItems",props:["group","filter"],setup(e){const s=e,i=[{name:"image",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"image"},{name:"name",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"name"},{name:"bestTil",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"date_expire"}];function t(r){return Ee.formatDate(r,"DD-MM-YYYY")}return(r,u)=>(k(),N(G,{flat:""},{default:x(()=>[d(je,{class:"text-h6 full-width",label:s.group.name,caption:s.group.description,"default-opened":"","expand-icon":"las la-angle-down","expanded-icon":"las la-angle-up"},{default:x(()=>[d(Pe,{"hide-bottom":"",grid:"",filter:S(O)().filter,flat:"",rows:S(Q)().items.filter(a=>a.group_id===s.group.id),columns:i,"row-key":"name","hide-header":""},{item:x(a=>[b("div",Ue,[d(G,{bordered:"",flat:"",class:"full-height"},{default:x(()=>[d($e,{class:"row items-center",horizontal:""},{default:x(()=>[d(De,{class:"col-2",height:"110px",fit:"cover",src:a.row.image},null,8,["src"]),d(D,{vertical:""}),b("div",Ye,[b("div",Me,[b("div",Re,[b("h5",Ke,L(a.row.name),1),b("h6",{class:pe(["q-ma-none text-weight-thin",a.row.description?"":"text-transparent"])},L(a.row.description||"none"),3)]),b("div",Ge,[b("div",We,[d(X,{outline:"",color:S(Fe)(a.row.date_expire),style:{"font-size":"11px"},class:""},{default:x(()=>[K(L(t(a.row.date_expire)),1)]),_:2},1032,["color"])]),b("div",Xe,[d(X,{style:{"font-size":"11px"}},{default:x(()=>[K(L(S(Q)().getTagName(a.row.tag_id)),1)]),_:2},1024)])])]),b("div",null,[a.row.amount!=0?(k(),N(Ae,{key:0,class:"row full-width"},{default:x(()=>[d(B,{dense:"",class:"q-px-md",color:"primary",icon:"las la-minus",onClick:l=>a.row.amount=Math.max((a.row.amount||0)-1,0)},null,8,["onClick"]),d(ne,{standout:"",dense:"",square:"","input-class":"text-right",suffix:a.row.unit,modelValue:a.row.amount,"onUpdate:modelValue":l=>a.row.amount=l,type:"number",min:"0",class:"col",value:a.row.amount||0},null,8,["suffix","modelValue","onUpdate:modelValue","value"]),d(B,{dense:"",class:"q-px-md",color:"primary",icon:"las la-plus",onClick:l=>a.row.amount=(a.row.amount||0)+1},null,8,["onClick"])]),_:2},1024)):(k(),j("div",Ze,[d(B,{class:"col q-mr-md",color:"primary",label:"cancel",onClick:l=>a.row.amount=1},null,8,["onClick"]),d(B,{class:"col",color:"red",label:"delete",onClick:l=>S(Q)().deleteItem(a.row.id)},null,8,["onClick"])]))])])]),_:2},1024),b("div",Je,[d(B,{flat:"",to:"/edit/"+a.row.id,class:"",icon:"las la-edit"},null,8,["to"])])]),_:2},1024)])]),_:1},8,["filter","rows"])]),_:1},8,["label","caption"])]),_:1}))}}),it=te({__name:"HomeView",setup(e){return $(()=>Q().isSignedIn,async()=>{await Q().fetchAll()}),(s,i)=>(k(),N(Ve,{class:"q-gutter-y-md"},{default:x(()=>[d(ne,{class:"q-pt-sm q-px-sm",outlined:"",dense:"",debounce:"300",modelValue:S(O)().filter,"onUpdate:modelValue":i[0]||(i[0]=t=>S(O)().filter=t),placeholder:"Search"},{append:x(()=>[d(A,{name:"search"})]),_:1},8,["modelValue"]),(k(!0),j(Se,null,qe(S(Q)().groups,(t,r)=>(k(),j("div",{class:"col row",key:r},[d(D,{style:{width:"10px"},vertical:""}),d(et,{class:"col full-width",group:t},null,8,["group"])]))),128))]),_:1}))}});export{it as default};
