import{k as W,r as K,ai as Z,aj as G,o as H,g as U,h as A,q as $,$ as J,a4 as k,ab as ee,t as te,au as ne,av as oe,aw as V,ax as T,ay as I,z as re,az as N,aA as _,aB as ie,c as S,w as ae,Z as ue,aC as se,aD as le}from"./index-AhKn-5hl.js";import{w as ce,x as de,u as fe}from"./QDialog-DvDEHx-i.js";const xe=W({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:n,emit:a}){const m=U(),h=K(null);let e=0;const o=[];function d(i){const v=typeof i=="boolean"?i:t.noErrorFocus!==!0,x=++e,C=(u,p)=>{a(`validation${u===!0?"Success":"Error"}`,p)},w=u=>{const p=u.validate();return typeof p.then=="function"?p.then(g=>({valid:g,comp:u}),g=>({valid:!1,comp:u,err:g})):Promise.resolve({valid:p,comp:u})};return(t.greedy===!0?Promise.all(o.map(w)).then(u=>u.filter(p=>p.valid!==!0)):o.reduce((u,p)=>u.then(()=>w(p).then(g=>{if(g.valid===!1)return Promise.reject(g)})),Promise.resolve()).catch(u=>[u])).then(u=>{if(u===void 0||u.length===0)return x===e&&C(!0),!0;if(x===e){const{comp:p,err:g}=u[0];if(g!==void 0&&console.error(g),C(!1,p),v===!0){const B=u.find(({comp:q})=>typeof q.focus=="function"&&J(q.$)===!1);B!==void 0&&B.comp.focus()}}return!1})}function f(){e++,o.forEach(i=>{typeof i.resetValidation=="function"&&i.resetValidation()})}function b(i){i!==void 0&&k(i);const v=e+1;d().then(x=>{v===e&&x===!0&&(t.onSubmit!==void 0?a("submit",i):i?.target!==void 0&&typeof i.target.submit=="function"&&i.target.submit())})}function l(i){i!==void 0&&k(i),a("reset"),ee(()=>{f(),t.autofocus===!0&&t.noResetFocus!==!0&&y()})}function y(){ce(()=>{if(h.value===null)return;(h.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||h.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||h.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(h.value.querySelectorAll("[tabindex]"),v=>v.tabIndex!==-1))?.focus({preventScroll:!0})})}te(ne,{bindComponent(i){o.push(i)},unbindComponent(i){const v=o.indexOf(i);v!==-1&&o.splice(v,1)}});let c=!1;return Z(()=>{c=!0}),G(()=>{c===!0&&t.autofocus===!0&&y()}),H(()=>{t.autofocus===!0&&y()}),Object.assign(m.proxy,{validate:d,resetValidation:f,submit:b,reset:l,focus:y,getValidationComponents:()=>o}),()=>A("form",{class:"q-form",ref:h,onSubmit:b,onReset:l},$(n.default))}}),j={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},ve=Object.keys(j);j.all=!0;function R(t){const n={};for(const a of ve)t[a]===!0&&(n[a]=!0);return Object.keys(n).length===0?j:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}const pe=["INPUT","TEXTAREA"];function L(t,n){return n.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof n.handler=="function"&&pe.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(n.uid)===-1)}function me(t){const n=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((a,m)=>{const h=parseFloat(a);h&&(n[m]=h)}),n}const he=oe({name:"touch-swipe",beforeMount(t,{value:n,arg:a,modifiers:m}){if(m.mouse!==!0&&T.has.touch!==!0)return;const h=m.mouseCapture===!0?"Capture":"",e={handler:n,sensitivity:me(a),direction:R(m),noop:re,mouseStart(o){L(o,e)&&ie(o)&&(N(e,"temp",[[document,"mousemove","move",`notPassive${h}`],[document,"mouseup","end","notPassiveCapture"]]),e.start(o,!0))},touchStart(o){if(L(o,e)){const d=o.target;N(e,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","notPassiveCapture"],[d,"touchend","end","notPassiveCapture"]]),e.start(o)}},start(o,d){T.is.firefox===!0&&I(t,!0);const f=_(o);e.event={x:f.left,y:f.top,time:Date.now(),mouse:d===!0,dir:!1}},move(o){if(e.event===void 0)return;if(e.event.dir!==!1){k(o);return}const d=Date.now()-e.event.time;if(d===0)return;const f=_(o),b=f.left-e.event.x,l=Math.abs(b),y=f.top-e.event.y,c=Math.abs(y);if(e.event.mouse!==!0){if(l<e.sensitivity[1]&&c<e.sensitivity[1]){e.end(o);return}}else if(window.getSelection().toString()!==""){e.end(o);return}else if(l<e.sensitivity[2]&&c<e.sensitivity[2])return;const i=l/d,v=c/d;e.direction.vertical===!0&&l<c&&l<100&&v>e.sensitivity[0]&&(e.event.dir=y<0?"up":"down"),e.direction.horizontal===!0&&l>c&&c<100&&i>e.sensitivity[0]&&(e.event.dir=b<0?"left":"right"),e.direction.up===!0&&l<c&&y<0&&l<100&&v>e.sensitivity[0]&&(e.event.dir="up"),e.direction.down===!0&&l<c&&y>0&&l<100&&v>e.sensitivity[0]&&(e.event.dir="down"),e.direction.left===!0&&l>c&&b<0&&c<100&&i>e.sensitivity[0]&&(e.event.dir="left"),e.direction.right===!0&&l>c&&b>0&&c<100&&i>e.sensitivity[0]&&(e.event.dir="right"),e.event.dir!==!1?(k(o),e.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),de(),e.styleCleanup=x=>{e.styleCleanup=void 0,document.body.classList.remove("non-selectable");const C=()=>{document.body.classList.remove("no-pointer-events--children")};x===!0?setTimeout(C,50):C()}),e.handler({evt:o,touch:e.event.mouse!==!0,mouse:e.event.mouse,direction:e.event.dir,duration:d,distance:{x:l,y:c}})):e.end(o)},end(o){e.event!==void 0&&(V(e,"temp"),T.is.firefox===!0&&I(t,!1),e.styleCleanup?.(!0),o!==void 0&&e.event.dir!==!1&&k(o),e.event=void 0)}};if(t.__qtouchswipe=e,m.mouse===!0){const o=m.mouseCapture===!0||m.mousecapture===!0?"Capture":"";N(e,"main",[[t,"mousedown","mouseStart",`passive${o}`]])}T.has.touch===!0&&N(e,"main",[[t,"touchstart","touchStart",`passive${m.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,n){const a=t.__qtouchswipe;a!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&a.end(),a.handler=n.value),a.direction=R(n.modifiers))},beforeUnmount(t){const n=t.__qtouchswipe;n!==void 0&&(V(n,"main"),V(n,"temp"),T.is.firefox===!0&&I(t,!1),n.styleCleanup?.(),delete t.__qtouchswipe)}});function ge(){let t=Object.create(null);return{getCache:(n,a)=>t[n]===void 0?t[n]=typeof a=="function"?a():a:t[n],setCache(n,a){t[n]=a},hasCache(n){return Object.hasOwnProperty.call(t,n)},clearCache(n){n!==void 0?delete t[n]:t=Object.create(null)}}}const Pe={name:{required:!0},disable:Boolean},M={setup(t,{slots:n}){return()=>A("div",{class:"q-panel scroll",role:"tabpanel"},$(n.default))}},Ce={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Se=["update:modelValue","beforeTransition","transition"];function Ae(){const{props:t,emit:n,proxy:a}=U(),{getCache:m}=ge(),{registerTimeout:h}=fe();let e,o;const d=K(null),f={value:null};function b(r){const s=t.vertical===!0?"up":"left";E((a.$q.lang.rtl===!0?-1:1)*(r.direction===s?1:-1))}const l=S(()=>[[he,b,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),y=S(()=>t.transitionPrev||`slide-${t.vertical===!0?"down":"right"}`),c=S(()=>t.transitionNext||`slide-${t.vertical===!0?"up":"left"}`),i=S(()=>`--q-transition-duration: ${t.transitionDuration}ms`),v=S(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),x=S(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),C=S(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);ae(()=>t.modelValue,(r,s)=>{const P=p(r)===!0?g(r):-1;o!==!0&&q(P===-1?0:P<g(s)?-1:1),f.value!==P&&(f.value=P,n("beforeTransition",r,s),h(()=>{n("transition",r,s)},t.transitionDuration))});function w(){E(1)}function O(){E(-1)}function u(r){n("update:modelValue",r)}function p(r){return r!=null&&r!==""}function g(r){return e.findIndex(s=>s.props.name===r&&s.props.disable!==""&&s.props.disable!==!0)}function B(){return e.filter(r=>r.props.disable!==""&&r.props.disable!==!0)}function q(r){const s=r!==0&&t.animated===!0&&f.value!==-1?"q-transition--"+(r===-1?y.value:c.value):null;d.value!==s&&(d.value=s)}function E(r,s=f.value){let P=s+r;for(;P!==-1&&P<e.length;){const D=e[P];if(D!==void 0&&D.props.disable!==""&&D.props.disable!==!0){q(r),o=!0,n("update:modelValue",D.props.name),setTimeout(()=>{o=!1});return}P+=r}t.infinite===!0&&e.length!==0&&s!==-1&&s!==e.length&&E(r,r===-1?e.length:-1)}function z(){const r=g(t.modelValue);return f.value!==r&&(f.value=r),!0}function F(){const r=p(t.modelValue)===!0&&z()&&e[f.value];return t.keepAlive===!0?[A(le,x.value,[A(C.value===!0?m(v.value,()=>({...M,name:v.value})):M,{key:v.value,style:i.value},()=>r)])]:[A("div",{class:"q-panel scroll",style:i.value,key:v.value,role:"tabpanel"},[r])]}function X(){if(e.length!==0)return t.animated===!0?[A(ue,{name:d.value},F)]:F()}function Q(r){return e=se($(r.default,[])).filter(s=>s.props!==null&&s.props.slot===void 0&&p(s.props.name)===!0),e.length}function Y(){return e}return Object.assign(a,{next:w,previous:O,goTo:u}),{panelIndex:f,panelDirectives:l,updatePanelsList:Q,updatePanelIndex:z,getPanelContent:X,getEnabledPanels:B,getPanels:Y,isValidPanelName:p,keepAliveProps:x,needsUniqueKeepAliveWrapper:C,goToPanelByOffset:E,goToPanel:u,nextPanel:w,previousPanel:O}}export{xe as Q,Se as a,Ce as b,Ae as c,ge as d,Pe as u};
