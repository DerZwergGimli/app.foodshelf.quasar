import{l as j,c as b,h as d,x as G,m as W,a9 as ge,aa as me,a4 as X,g as fe,r as M,w as L,D as he,ab as ve,Q as A,H as be,d as Z,N as H,O as k,U as x,f as i,P as y,Y as C,S as N,W as h,ac as Q,ad as xe,a3 as z,Z as O,X as B,F as we,a6 as _e}from"./index-BKBwGZni.js";import{i as Se,j as pe,k as ye,l as Ie,u as qe,f as D,h as J}from"./QDialog-C6e_t2yQ.js";import{Q as Te}from"./QPage-CGZKgWAY.js";import{Q as ke}from"./QImg-DGsCahL2.js";import{Q as R,a as F,d as Ce}from"./date-CutDB9hO.js";import{u as Be,b as Qe,Q as K,a as Le}from"./QCard-BLXgLMri.js";import{Q as De}from"./QTable--zR_kdit.js";import{Q as $e,a as V}from"./QItemSection-49_xV73S.js";import"./QList-DYbJxK1Q.js";const Ee=j({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:s}){const r=b(()=>{const o=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(l=>e[l]===!0).map(l=>`q-btn-group--${l}`).join(" ");return`q-btn-group row no-wrap${o.length!==0?" "+o:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>d("div",{class:r.value},G(s.default))}}),Ve=j({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:s,emit:r}){let o=!1,l,u,n=null,c=null,v,T;function p(){l==null||l(),l=null,o=!1,n!==null&&(clearTimeout(n),n=null),c!==null&&(clearTimeout(c),c=null),u==null||u.removeEventListener("transitionend",v),v=null}function g(a,f,w){f!==void 0&&(a.style.height=`${f}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,l=w}function m(a,f){a.style.overflowY=null,a.style.height=null,a.style.transition=null,p(),f!==T&&r(f)}function $(a,f){let w=0;u=a,o===!0?(p(),w=a.offsetHeight===a.scrollHeight?0:void 0):(T="hide",a.style.overflowY="hidden"),g(a,w,f),n=setTimeout(()=>{n=null,a.style.height=`${a.scrollHeight}px`,v=_=>{c=null,(Object(_)!==_||_.target===a)&&m(a,"show")},a.addEventListener("transitionend",v),c=setTimeout(v,e.duration*1.1)},100)}function E(a,f){let w;u=a,o===!0?p():(T="show",a.style.overflowY="hidden",w=a.scrollHeight),g(a,w,f),n=setTimeout(()=>{n=null,a.style.height=0,v=_=>{c=null,(Object(_)!==_||_.target===a)&&m(a,"hide")},a.addEventListener("transitionend",v),c=setTimeout(v,e.duration*1.1)},100)}return W(()=>{o===!0&&p()}),()=>d(ge,{css:!1,appear:e.appear,onEnter:$,onLeave:E},s.default)}}),q=me({}),Ae=Object.keys(X),He=j({name:"QExpansionItem",props:{...X,...pe,...Be,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Se,"click","afterShow","afterHide"],setup(e,{slots:s,emit:r}){const{proxy:{$q:o}}=fe(),l=Qe(e,o),u=M(e.modelValue!==null?e.modelValue:e.defaultOpened),n=M(null),c=ye(),{show:v,hide:T,toggle:p}=Ie({showing:u});let g,m;const $=b(()=>`q-expansion-item q-item-type q-expansion-item--${u.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),E=b(()=>e.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),a=b(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),f=b(()=>{const t={};return Ae.forEach(S=>{t[S]=e[S]}),t}),w=b(()=>a.value===!0||e.expandIconToggle!==!0),_=b(()=>e.expandedIcon!==void 0&&u.value===!0?e.expandedIcon:e.expandIcon||o.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),ee=b(()=>e.disable!==!0&&(a.value===!0||e.expandIconToggle===!0)),te=b(()=>({expanded:u.value===!0,detailsId:c.value,toggle:p,show:v,hide:T})),P=b(()=>{const t=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:o.lang.label[u.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":u.value===!0?"true":"false","aria-controls":c.value,"aria-label":t}});L(()=>e.group,t=>{m==null||m(),t!==void 0&&Y()});function ne(t){a.value!==!0&&p(t),r("click",t)}function ae(t){t.keyCode===13&&U(t,!0)}function U(t,S){var I;S!==!0&&t.qAvoidFocus!==!0&&((I=n.value)==null||I.focus()),p(t),be(t)}function oe(){r("afterShow")}function le(){r("afterHide")}function Y(){g===void 0&&(g=qe()),u.value===!0&&(q[e.group]=g);const t=L(u,I=>{I===!0?q[e.group]=g:q[e.group]===g&&delete q[e.group]}),S=L(()=>q[e.group],(I,de)=>{de===g&&I!==void 0&&I!==g&&T()});m=()=>{t(),S(),q[e.group]===g&&delete q[e.group],m=void 0}}function ie(){const t={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},S=[d(A,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&u.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:_.value})];return ee.value===!0&&(Object.assign(t,{tabindex:0,...P.value,onClick:U,onKeyup:ae}),S.unshift(d("div",{ref:n,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),d(V,t,()=>S)}function se(){let t;return s.header!==void 0?t=[].concat(s.header(te.value)):(t=[d(V,()=>[d(R,{lines:e.labelLines},()=>e.label||""),e.caption?d(R,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&t[e.switchToggleSide===!0?"push":"unshift"](d(V,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>d(A,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&t[e.switchToggleSide===!0?"unshift":"push"](ie()),t}function re(){const t={ref:"item",style:e.headerStyle,class:e.headerClass,dark:l.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return w.value===!0&&(t.clickable=!0,t.onClick=ne,Object.assign(t,a.value===!0?f.value:P.value)),d($e,t,se)}function ue(){return he(d("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:E.value,id:c.value},G(s.default)),[[ve,u.value]])}function ce(){const t=[re(),d(Ve,{duration:e.duration,onShow:oe,onHide:le},ue)];return e.expandSeparator===!0&&t.push(d(D,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:l.value}),d(D,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:l.value})),t}return e.group!==void 0&&Y(),W(()=>{m==null||m()}),()=>d("div",{class:$.value},[d("div",{class:"q-expansion-item__container relative-position"},ce())])}});function Ne(e){const[s,r,o]=e.split("/").map(Number);return Date.UTC(s,r-1,o)}function Oe(e){const s=Date.now(),r=Ne(e),o=r-s;return console.log(s,r),console.log(o),o>365*24*60*60*1e3?"green":o>6*30*24*60*60*1e3?"orange":o>=0?"purple":"red"}const je={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Pe={class:"col q-mx-xs"},Ue={class:"row full-width"},Ye={class:"col"},Me={class:"q-ma-none"},ze={class:"col text-right"},Re={class:"col"},Fe={class:""},Ke={key:1,class:"row full-width q-pa-xs"},Ge={class:"absolute-top-left",style:{top:"-5px",left:"-15px"}},We=Z({__name:"TableItems",props:["group","filter"],setup(e){const s=e,r=[{name:"image",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"image"},{name:"name",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"name"},{name:"bestTil",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"date_expire"}];function o(l){return Ce.formatDate(l,"DD-MM-YYYY")}return(l,u)=>(k(),H(K,{flat:""},{default:x(()=>[i(He,{class:"text-h6 full-width",label:s.group.name,caption:s.group.description,"default-opened":"","expand-icon":"las la-angle-down","expanded-icon":"las la-angle-up"},{default:x(()=>[i(De,{"hide-bottom":"",grid:"",filter:y(N)().filter,flat:"",rows:y(C)().items.filter(n=>n.group_id===s.group.id),columns:r,"row-key":"name","hide-header":""},{item:x(n=>[h("div",je,[i(K,{bordered:"",flat:"",class:"full-height"},{default:x(()=>[i(Le,{class:"row items-center",horizontal:""},{default:x(()=>[i(ke,{class:"col-2",height:"110px",fit:"cover",src:n.row.image},null,8,["src"]),i(D,{vertical:""}),h("div",Pe,[h("div",Ue,[h("div",Ye,[h("h5",Me,Q(n.row.name),1),h("h6",{class:xe(["q-ma-none text-weight-thin",n.row.description?"":"text-transparent"])},Q(n.row.description||"none"),3)]),h("div",ze,[h("div",Re,[i(F,{outline:"",color:y(Oe)(n.row.date_expire),style:{"font-size":"11px"},class:""},{default:x(()=>[z(Q(o(n.row.date_expire)),1)]),_:2},1032,["color"])]),h("div",Fe,[i(F,{style:{"font-size":"11px"}},{default:x(()=>[z(Q(y(C)().getTagName(n.row.tag_id)),1)]),_:2},1024)])])]),h("div",null,[n.row.amount!=0?(k(),H(Ee,{key:0,class:"row full-width"},{default:x(()=>[i(B,{dense:"",class:"q-px-md",color:"primary",icon:"las la-minus",onClick:c=>n.row.amount=Math.max((n.row.amount||0)-1,0)},null,8,["onClick"]),i(J,{standout:"",dense:"",square:"","input-class":"text-right",suffix:n.row.unit,modelValue:n.row.amount,"onUpdate:modelValue":c=>n.row.amount=c,type:"number",min:"0",class:"col",value:n.row.amount||0},null,8,["suffix","modelValue","onUpdate:modelValue","value"]),i(B,{dense:"",class:"q-px-md",color:"primary",icon:"las la-plus",onClick:c=>n.row.amount=(n.row.amount||0)+1},null,8,["onClick"])]),_:2},1024)):(k(),O("div",Ke,[i(B,{class:"col q-mr-md",color:"primary",label:"cancel",onClick:c=>n.row.amount=1},null,8,["onClick"]),i(B,{class:"col",color:"red",label:"delete",onClick:c=>y(C)().deleteItem(n.row.id)},null,8,["onClick"])]))])])]),_:2},1024),h("div",Ge,[i(B,{flat:"",to:"/edit/"+n.row.id,class:"",icon:"las la-edit"},null,8,["to"])])]),_:2},1024)])]),_:1},8,["filter","rows"])]),_:1},8,["label","caption"])]),_:1}))}}),it=Z({__name:"HomeView",setup(e){return L(()=>C().isSignedIn,async()=>{await C().fetchAll()}),(s,r)=>(k(),H(Te,{class:"q-gutter-y-md"},{default:x(()=>[i(J,{class:"q-pt-sm q-px-sm",outlined:"",dense:"",debounce:"300",modelValue:y(N)().filter,"onUpdate:modelValue":r[0]||(r[0]=o=>y(N)().filter=o),placeholder:"Search"},{append:x(()=>[i(A,{name:"search"})]),_:1},8,["modelValue"]),(k(!0),O(we,null,_e(y(C)().groups,(o,l)=>(k(),O("div",{class:"col row",key:l},[i(D,{style:{width:"10px"},vertical:""}),i(We,{class:"col full-width",group:o},null,8,["group"])]))),128))]),_:1}))}});export{it as default};
