import{j as v,i as K,f as p}from"./QDialog-DW0vDZBD.js";import{Q as Y,a as D}from"./QTabPanels-CIVTyPVn.js";import{d as y,r as _,N as k,O as S,U as r,f as l,P as i,V as Z,X as w,Z as s,l as j,g as E,c as G,ah as J,p as L,I as ee,h as m,x as $,Y as C,ac as h,ai as T,w as te,o as ae,ag as le,_ as oe,ad as ne,S as O,aj as ue}from"./index-CmySz2ii.js";import{Q as H}from"./use-panel-Cvcez2OP.js";import{e as re}from"./date-zUp-kFqF.js";import{Q as N}from"./QTable-BCAZyLkb.js";import{_ as de}from"./CreateItem.vue_vue_type_script_setup_true_lang-NPCjI4WX.js";const ie=y({__name:"CreateGroup",setup(e){const n=_(""),u=_("");async function o(){await s().createGroup({name:n.value,description:u.value,created_at:new Date,user_id:s().user_id}),console.log("Group Created:",{name:n.value,description:u.value})}return(t,a)=>(S(),k(K,null,{default:r(()=>[l(i(H),{onSubmit:Z(o,["prevent"]),class:"q-gutter-y-md"},{default:r(()=>[l(i(v),{dense:"",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=d=>n.value=d),label:"Group Name",outlined:"",maxlength:"100",autofocus:""},null,8,["modelValue"]),l(i(v),{dense:"",modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=d=>u.value=d),label:"Group Description",outlined:"",type:"text",maxlength:"500",autofocus:""},null,8,["modelValue"]),l(i(w),{class:"full-width",label:"Create Group",type:"submit",color:"primary"})]),_:1})]),_:1}))}}),se=y({__name:"CreateTag",setup(e){const n=_({name:"",description:"",created_at:new Date,user_id:s().user_id});return(u,o)=>(S(),k(i(K),null,{default:r(()=>[l(i(H),{class:"q-gutter-y-md"},{default:r(()=>[l(i(v),{dense:"",outlined:"",modelValue:n.value.name,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value.name=t),label:"Tag Name",required:"",autofocus:""},null,8,["modelValue"]),l(i(v),{dense:"",outlined:"",modelValue:n.value.description,"onUpdate:modelValue":o[1]||(o[1]=t=>n.value.description=t),label:"Tag Description",type:"text",autofocus:""},null,8,["modelValue"]),l(i(w),{class:"full-width",onClick:o[2]||(o[2]=t=>i(s)().createTag(n.value)),type:"submit",label:"Create Tag",color:"primary"})]),_:1})]),_:1}))}});function g(e,n=new WeakMap){if(Object(e)!==e)return e;if(n.has(e))return n.get(e);const u=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const o=e.valueOf();if(Object(o)!==o){const t=new e.constructor(o);return n.set(e,t),t}}return n.set(e,u),e instanceof Set?e.forEach(o=>{u.add(g(o,n))}):e instanceof Map&&e.forEach((o,t)=>{u.set(t,g(o,n))}),Object.assign(u,...Object.keys(e).map(o=>({[o]:g(e[o],n)})))}const U=j({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:u}){const{proxy:o}=E(),{$q:t}=o,a=_(null),d=_(""),c=_("");let x=!1;const A=G(()=>J({initialValue:d.value,validate:e.validate,set:Q,cancel:q,updatePosition:M},"value",()=>c.value,f=>{c.value=f}));function Q(){e.validate(c.value)!==!1&&(B()===!0&&(u("save",c.value,d.value),u("update:modelValue",c.value)),P())}function q(){B()===!0&&u("cancel",c.value,d.value),P()}function M(){L(()=>{a.value.updatePosition()})}function B(){return ee(c.value,d.value)===!1}function P(){x=!0,a.value.hide()}function R(){x=!1,d.value=g(e.modelValue),c.value=g(e.modelValue),u("beforeShow")}function W(){u("show")}function F(){x===!1&&B()===!0&&(e.autoSave===!0&&e.validate(c.value)===!0?(u("save",c.value,d.value),u("update:modelValue",c.value)):u("cancel",c.value,d.value)),u("beforeHide")}function z(){u("hide")}function X(){const f=n.default!==void 0?[].concat(n.default(A.value)):[];return e.title&&f.unshift(m("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&f.push(m("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[m(w,{flat:!0,color:e.color,label:e.labelCancel||t.lang.label.cancel,onClick:q}),m(w,{flat:!0,color:e.color,label:e.labelSet||t.lang.label.set,onClick:Q})])),f}return Object.assign(o,{set:Q,cancel:q,show(f){var V;(V=a.value)==null||V.show(f)},hide(f){var V;(V=a.value)==null||V.hide(f)},updatePosition:M}),()=>{if(e.disable!==!0)return m(re,{ref:a,class:"q-popup-edit",cover:e.cover,onBeforeShow:R,onShow:W,onBeforeHide:F,onHide:z,onEscapeKey:q},X)}}}),b=j({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:n}){const u=E(),o=G(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return m("td",{class:o.value},$(n.default));const t=u.vnode.key,a=(e.props.colsMap!==void 0?e.props.colsMap[t]:null)||e.props.col;if(a===void 0)return;const{row:d}=e.props;return m("td",{class:o.value+a.__tdClass(d),style:a.__tdStyle(d)},$(n.default))}}}),I=j({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:n}){const u=G(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>{var o;return m("tr",{style:(o=e.props)==null?void 0:o.__trStyle,class:u.value},$(n.default))}}}),ce=y({__name:"TableTags",setup(e){const n=[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"description",required:!0,align:"left",label:"Description",field:"description",sortable:!0},{name:"button",required:!0,label:"",field:"button"}];return(u,o)=>(S(),k(N,{flat:"",rows:i(s)().tags,columns:n,"row-key":"name","hide-bottom":"","rows-per-page-options":[0],pagination:{rowsPerPage:0},"binary-state-sort":""},{body:r(t=>[l(I,{props:t},{default:r(()=>[l(b,{key:"name",props:t},{default:r(()=>[C(h(t.row.name)+" ",1),l(U,{modelValue:t.row.name,"onUpdate:modelValue":a=>t.row.name=a,onSave:a=>i(s)().updateTag(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,dense:"",autofocus:"",counter:"",onKeyup:T(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(b,{key:"description",props:t},{default:r(()=>[C(h(t.row.description)+" ",1),l(U,{modelValue:t.row.description,"onUpdate:modelValue":a=>t.row.description=a,onSave:a=>i(s)().updateTag(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,dense:"",autofocus:"",counter:"",onKeyup:T(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(b,{key:"description",props:t},{default:r(()=>[l(w,{onClick:a=>i(s)().deleteTag(t.row.id),icon:"delete",flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]))}}),fe=y({__name:"TableGroups",setup(e){const n=[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"description",required:!0,align:"left",label:"Description",field:"description",sortable:!0},{name:"button",required:!0,label:"",field:"button"}];return(u,o)=>(S(),k(N,{flat:"",rows:i(s)().groups,columns:n,"row-key":"name","hide-bottom":"","rows-per-page-options":[0],pagination:{rowsPerPage:0},"binary-state-sort":""},{body:r(t=>[l(I,{props:t},{default:r(()=>[l(b,{key:"name",props:t},{default:r(()=>[C(h(t.row.name)+" ",1),l(U,{modelValue:t.row.name,"onUpdate:modelValue":a=>t.row.name=a,onSave:a=>i(s)().updateGroup(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,dense:"",autofocus:"",counter:"",onKeyup:T(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(b,{key:"description",props:t},{default:r(()=>[C(h(t.row.description)+" ",1),l(U,{modelValue:t.row.description,"onUpdate:modelValue":a=>t.row.description=a,onSave:a=>i(s)().updateGroup(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,dense:"",autofocus:"",counter:"",onKeyup:T(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(b,{key:"description",props:t},{default:r(()=>[l(w,{onClick:a=>i(s)().deleteGroup(t.row.id),icon:"delete",flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]))}}),ge=y({__name:"AddView",setup(e){return te(()=>s().isSignedIn,async()=>{await s().fetchAll()}),ae(()=>{s().item_selected=le}),(n,u)=>(S(),oe("div",{class:ne(i(ue)().screen.gt.sm?"q-pa-md":"q-pa-none")},[l(p,{flat:"",style:{"max-width":"600px",margin:"auto"}},{default:r(()=>[l(Y,{modelValue:i(O)().addActiveTab,"onUpdate:modelValue":u[0]||(u[0]=o=>i(O)().addActiveTab=o),animated:""},{default:r(()=>[l(D,{name:"item"},{default:r(()=>[l(p,{flat:""},{default:r(()=>[l(de)]),_:1})]),_:1}),l(D,{name:"group",class:"q-gutter-y-md"},{default:r(()=>[l(p,{flat:""},{default:r(()=>[l(ie)]),_:1}),l(p,{flat:""},{default:r(()=>[l(fe)]),_:1})]),_:1}),l(D,{name:"tag",class:"q-gutter-y-md"},{default:r(()=>[l(p,{flat:""},{default:r(()=>[l(se)]),_:1}),l(p,{flat:""},{default:r(()=>[l(ce)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],2))}});export{ge as default};
