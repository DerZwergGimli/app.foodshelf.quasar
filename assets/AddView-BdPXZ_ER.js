import{Q as z,a as Q}from"./QTabPanels-BD79iVuP.js";import{j as v,i as X,f as B}from"./QDialog-CYryim8o.js";import{_ as Y}from"./CreateItem.vue_vue_type_script_setup_true_lang-CcrVG8wo.js";import{d as V,r as p,N as T,O as g,U as r,f as l,P as d,X as b,V as Z,Z as s,l as $,g as O,c as G,ag as J,p as L,I as ee,h as f,x as D,Y as S,ad as C,ah as q,w as te,o as ae,af as le,_ as oe,ae as ne,S as j,ai as ue}from"./index-BDie2Ekz.js";import{Q as K}from"./use-panel-CXUNkEmu.js";import{e as re}from"./date-DAF_oPs1.js";import{Q as E}from"./QTable-6aECsJ6w.js";const ie=V({__name:"CreateGroup",setup(e){const o=p(""),n=p("");async function u(){await s().createGroup({name:o.value,description:n.value,created_at:new Date,user_id:s().user_id}),console.log("Group Created:",{name:o.value,description:n.value})}return(t,a)=>(g(),T(d(K),{onSubmit:Z(u,["prevent"]),class:"q-gutter-y-md"},{default:r(()=>[l(d(v),{dense:"",modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=i=>o.value=i),label:"Group Name",outlined:"",maxlength:"100",autofocus:""},null,8,["modelValue"]),l(d(v),{dense:"",modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=i=>n.value=i),label:"Group Description",outlined:"",type:"text",maxlength:"500",autofocus:""},null,8,["modelValue"]),l(d(b),{class:"full-width",label:"Create Group",type:"submit",color:"primary"})]),_:1}))}}),de=V({__name:"CreateTag",setup(e){const o=p({name:"",description:"",created_at:new Date,user_id:s().user_id});return(n,u)=>(g(),T(d(X),null,{default:r(()=>[l(d(K),{class:"q-gutter-y-md"},{default:r(()=>[l(d(v),{dense:"",outlined:"",modelValue:o.value.name,"onUpdate:modelValue":u[0]||(u[0]=t=>o.value.name=t),label:"Tag Name",required:"",autofocus:""},null,8,["modelValue"]),l(d(v),{dense:"",outlined:"",modelValue:o.value.description,"onUpdate:modelValue":u[1]||(u[1]=t=>o.value.description=t),label:"Tag Description",type:"text",autofocus:""},null,8,["modelValue"]),l(d(b),{class:"full-width",onClick:u[2]||(u[2]=t=>d(s)().createTag(o.value)),type:"submit",label:"Create Tag",color:"primary"})]),_:1})]),_:1}))}});function w(e,o=new WeakMap){if(Object(e)!==e)return e;if(o.has(e))return o.get(e);const n=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const u=e.valueOf();if(Object(u)!==u){const t=new e.constructor(u);return o.set(e,t),t}}return o.set(e,n),e instanceof Set?e.forEach(u=>{n.add(w(u,o))}):e instanceof Map&&e.forEach((u,t)=>{n.set(t,w(u,o))}),Object.assign(n,...Object.keys(e).map(u=>({[u]:w(e[u],o)})))}const h=$({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:o,emit:n}){const{proxy:u}=O(),{$q:t}=u,a=p(null),i=p(""),c=p("");let U=!1;const N=G(()=>J({initialValue:i.value,validate:e.validate,set:k,cancel:y,updatePosition:M},"value",()=>c.value,m=>{c.value=m}));function k(){e.validate(c.value)!==!1&&(x()===!0&&(n("save",c.value,i.value),n("update:modelValue",c.value)),P())}function y(){x()===!0&&n("cancel",c.value,i.value),P()}function M(){L(()=>{a.value.updatePosition()})}function x(){return ee(c.value,i.value)===!1}function P(){U=!0,a.value.hide()}function I(){U=!1,i.value=w(e.modelValue),c.value=w(e.modelValue),n("beforeShow")}function A(){n("show")}function R(){U===!1&&x()===!0&&(e.autoSave===!0&&e.validate(c.value)===!0?(n("save",c.value,i.value),n("update:modelValue",c.value)):n("cancel",c.value,i.value)),n("beforeHide")}function W(){n("hide")}function F(){const m=o.default!==void 0?[].concat(o.default(N.value)):[];return e.title&&m.unshift(f("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&m.push(f("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[f(b,{flat:!0,color:e.color,label:e.labelCancel||t.lang.label.cancel,onClick:y}),f(b,{flat:!0,color:e.color,label:e.labelSet||t.lang.label.set,onClick:k})])),m}return Object.assign(u,{set:k,cancel:y,show(m){a.value?.show(m)},hide(m){a.value?.hide(m)},updatePosition:M}),()=>{if(e.disable!==!0)return f(re,{ref:a,class:"q-popup-edit",cover:e.cover,onBeforeShow:I,onShow:A,onBeforeHide:R,onHide:W,onEscapeKey:y},F)}}}),_=$({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const n=O(),u=G(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return f("td",{class:u.value},D(o.default));const t=n.vnode.key,a=(e.props.colsMap!==void 0?e.props.colsMap[t]:null)||e.props.col;if(a===void 0)return;const{row:i}=e.props;return f("td",{class:u.value+a.__tdClass(i),style:a.__tdStyle(i)},D(o.default))}}}),H=$({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const n=G(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>f("tr",{style:e.props?.__trStyle,class:n.value},D(o.default))}}),se=V({__name:"TableTags",setup(e){const o=[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"description",required:!0,align:"left",label:"Description",field:"description",sortable:!0},{name:"button",required:!0,label:"",field:"button"}];return(n,u)=>(g(),T(E,{flat:"",rows:d(s)().tags,columns:o,"row-key":"name","hide-bottom":"","rows-per-page-options":[0],pagination:{rowsPerPage:0},"binary-state-sort":""},{body:r(t=>[l(H,{props:t},{default:r(()=>[l(_,{key:"name",props:t},{default:r(()=>[S(C(t.row.name)+" ",1),l(h,{modelValue:t.row.name,"onUpdate:modelValue":a=>t.row.name=a,onSave:a=>d(s)().updateTag(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,dense:"",autofocus:"",counter:"",onKeyup:q(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(_,{key:"description",props:t},{default:r(()=>[S(C(t.row.description)+" ",1),l(h,{modelValue:t.row.description,"onUpdate:modelValue":a=>t.row.description=a,onSave:a=>d(s)().updateTag(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,dense:"",autofocus:"",counter:"",onKeyup:q(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(_,{key:"description",props:t},{default:r(()=>[l(b,{onClick:a=>d(s)().deleteTag(t.row.id),icon:"delete",flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]))}}),ce=V({__name:"TableGroups",setup(e){const o=[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"description",required:!0,align:"left",label:"Description",field:"description",sortable:!0},{name:"button",required:!0,label:"",field:"button"}];return(n,u)=>(g(),T(E,{flat:"",rows:d(s)().groups,columns:o,"row-key":"name","hide-bottom":"","rows-per-page-options":[0],pagination:{rowsPerPage:0},"binary-state-sort":""},{body:r(t=>[l(H,{props:t},{default:r(()=>[l(_,{key:"name",props:t},{default:r(()=>[S(C(t.row.name)+" ",1),l(h,{modelValue:t.row.name,"onUpdate:modelValue":a=>t.row.name=a,onSave:a=>d(s)().updateGroup(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,dense:"",autofocus:"",counter:"",onKeyup:q(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(_,{key:"description",props:t},{default:r(()=>[S(C(t.row.description)+" ",1),l(h,{modelValue:t.row.description,"onUpdate:modelValue":a=>t.row.description=a,onSave:a=>d(s)().updateGroup(t.row,t.row.id)},{default:r(a=>[l(v,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,dense:"",autofocus:"",counter:"",onKeyup:q(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(_,{key:"description",props:t},{default:r(()=>[l(b,{onClick:a=>d(s)().deleteGroup(t.row.id),icon:"delete",flat:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]))}}),Ve=V({__name:"AddView",setup(e){return te(()=>s().isSignedIn,async()=>{await s().fetchAll()}),ae(()=>{s().item_selected=le}),(o,n)=>(g(),oe("div",{class:ne(d(ue)().screen.gt.sm?"q-pa-md":"q-pa-none")},[l(B,{flat:"",style:{"max-width":"600px",margin:"auto"}},{default:r(()=>[l(z,{modelValue:d(j)().addActiveTab,"onUpdate:modelValue":n[0]||(n[0]=u=>d(j)().addActiveTab=u),animated:""},{default:r(()=>[l(Q,{name:"item"},{default:r(()=>[l(Y)]),_:1}),l(Q,{name:"group"},{default:r(()=>[l(B,{flat:""},{default:r(()=>[l(ie),l(ce)]),_:1})]),_:1}),l(Q,{name:"tag"},{default:r(()=>[l(B,{flat:""},{default:r(()=>[l(de),l(se)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],2))}});export{Ve as default};
