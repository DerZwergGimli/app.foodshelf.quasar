import{k as z,g as ne,a as ae,l as N,m as Se,u as ye,c as f,h as s,q as G,r as B,v as _e,o as we,Z as se,_ as xe,w as j,$ as J,n as ue,a0 as qe,U as ce,a1 as Ie,a2 as Te,a3 as ee,a4 as ke,d as de,N as V,E as H,f as g,I as x,G as k,M as A,H as te,K as L,a5 as Ce,D as ge,a6 as Le,a7 as R,a8 as Be,L as ie,Q as E,F as fe,W as Qe}from"./index-AhKn-5hl.js";import{u as oe,i as $e,j as De,k as Ne,l as He,m as Ae,n as Ee,o as je,e as Y,d as ze,f as Fe,h as me}from"./QDialog-DvDEHx-i.js";import{Q as Pe,a as le,b as X,c as re,d as pe}from"./date-DlpFr2ad.js";import{Q as Me}from"./QTable-BsczTLtZ.js";const Oe=z({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:u}){const{proxy:{$q:l}}=ne(),i=ae(Se,N);if(i===N)return console.error("QPage needs to be a deep child of QLayout"),N;if(ae(ye,N)===N)return console.error("QPage needs to be child of QPageContainer"),N;const d=f(()=>{const r=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof e.styleFn=="function"){const h=i.isContainer.value===!0?i.containerHeight.value:l.screen.height;return e.styleFn(r,h)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-r+"px":l.screen.height===0?r!==0?`calc(100vh - ${r}px)`:"100vh":l.screen.height-r+"px"}}),t=f(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>s("main",{class:t.value,style:d.value},G(u.default))}}),Re={ratio:[String,Number]};function Ve(e,u){return f(()=>{const l=Number(e.ratio||(u!==void 0?u.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const Ye=1.7778,Ge=z({name:"QImg",props:{...Re,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ye},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:u,emit:l}){const i=B(e.initialRatio),c=Ve(e,i),d=ne(),{registerTimeout:t,removeTimeout:r}=oe(),{registerTimeout:h,removeTimeout:q}=oe(),S=f(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),v=f(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),m=[B(null),B(S.value)],y=B(0),C=B(!1),n=B(!1),b=f(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),_=f(()=>({width:e.width,height:e.height})),w=f(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),K=f(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function U(){if(q(),e.loadingShowDelay===0){C.value=!0;return}h(()=>{C.value=!0},e.loadingShowDelay)}function $(){q(),C.value=!1}function W({target:o}){J(d)===!1&&(r(),i.value=o.naturalHeight===0?.5:o.naturalWidth/o.naturalHeight,F(o,1))}function F(o,I){I===1e3||J(d)===!0||(o.complete===!0?P(o):t(()=>{F(o,I+1)},50))}function P(o){J(d)!==!0&&(y.value=y.value^1,m[y.value].value=null,$(),o.getAttribute("__qerror")!=="true"&&(n.value=!1),l("load",o.currentSrc||o.src))}function Z(o){r(),$(),n.value=!0,m[y.value].value=v.value,m[y.value^1].value=S.value,l("error",o)}function p(o){const I=m[o].value,D={key:"img_"+o,class:w.value,style:K.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...I};return y.value===o?Object.assign(D,{class:D.class+"current",onLoad:W,onError:Z}):D.class+="loaded",s("div",{class:"q-img__container absolute-full",key:"img"+o},s("img",D))}function M(){return C.value===!1?s("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},G(u[n.value===!0?"error":"default"])):s("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},u.loading!==void 0?u.loading():e.noSpinner===!0?void 0:[s(xe,{color:e.spinnerColor,size:e.spinnerSize})])}{let o=function(){j(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,I=>{r(),n.value=!1,I===null?($(),m[y.value^1].value=S.value):U(),m[y.value].value=I},{immediate:!0})};_e.value===!0?we(o):o()}return()=>{const o=[];return c.value!==null&&o.push(s("div",{key:"filler",style:c.value})),m[0].value!==null&&o.push(p(0)),m[1].value!==null&&o.push(p(1)),o.push(s(se,{name:"q-transition--fade"},M)),s("div",{key:"main",class:b.value,style:_.value,role:"img","aria-label":e.alt},o)}}}),Ke=z({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:u}){const l=f(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(c=>e[c]===!0).map(c=>`q-btn-group--${c}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>s("div",{class:l.value},G(u.default))}}),Ue=z({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:u,emit:l}){let i=!1,c,d,t=null,r=null,h,q;function S(){c?.(),c=null,i=!1,t!==null&&(clearTimeout(t),t=null),r!==null&&(clearTimeout(r),r=null),d?.removeEventListener("transitionend",h),h=null}function v(n,b,_){b!==void 0&&(n.style.height=`${b}px`),n.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,i=!0,c=_}function m(n,b){n.style.overflowY=null,n.style.height=null,n.style.transition=null,S(),b!==q&&l(b)}function y(n,b){let _=0;d=n,i===!0?(S(),_=n.offsetHeight===n.scrollHeight?0:void 0):(q="hide",n.style.overflowY="hidden"),v(n,_,b),t=setTimeout(()=>{t=null,n.style.height=`${n.scrollHeight}px`,h=w=>{r=null,(Object(w)!==w||w.target===n)&&m(n,"show")},n.addEventListener("transitionend",h),r=setTimeout(h,e.duration*1.1)},100)}function C(n,b){let _;d=n,i===!0?S():(q="show",n.style.overflowY="hidden",_=n.scrollHeight),v(n,_,b),t=setTimeout(()=>{t=null,n.style.height=0,h=w=>{r=null,(Object(w)!==w||w.target===n)&&m(n,"hide")},n.addEventListener("transitionend",h),r=setTimeout(h,e.duration*1.1)},100)}return ue(()=>{i===!0&&S()}),()=>s(se,{css:!1,appear:e.appear,onEnter:y,onLeave:C},u.default)}}),Q=qe({}),We=Object.keys(ce),Ze=z({name:"QExpansionItem",props:{...ce,...Ne,...De,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...$e,"click","afterShow","afterHide"],setup(e,{slots:u,emit:l}){const{proxy:{$q:i}}=ne(),c=He(e,i),d=B(e.modelValue!==null?e.modelValue:e.defaultOpened),t=B(null),r=Ae(),{show:h,hide:q,toggle:S}=Ee({showing:d});let v,m;const y=f(()=>`q-expansion-item q-item-type q-expansion-item--${d.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),C=f(()=>e.contentInsetLevel===void 0?null:{["padding"+(i.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),n=f(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),b=f(()=>{const a={};return We.forEach(T=>{a[T]=e[T]}),a}),_=f(()=>n.value===!0||e.expandIconToggle!==!0),w=f(()=>e.expandedIcon!==void 0&&d.value===!0?e.expandedIcon:e.expandIcon||i.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),K=f(()=>e.disable!==!0&&(n.value===!0||e.expandIconToggle===!0)),U=f(()=>({expanded:d.value===!0,detailsId:r.value,toggle:S,show:h,hide:q})),$=f(()=>{const a=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:i.lang.label[d.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":d.value===!0?"true":"false","aria-controls":r.value,"aria-label":a}});j(()=>e.group,a=>{m?.(),a!==void 0&&M()});function W(a){n.value!==!0&&S(a),l("click",a)}function F(a){a.keyCode===13&&P(a,!0)}function P(a,T){T!==!0&&a.qAvoidFocus!==!0&&t.value?.focus(),S(a),ke(a)}function Z(){l("afterShow")}function p(){l("afterHide")}function M(){v===void 0&&(v=je()),d.value===!0&&(Q[e.group]=v);const a=j(d,O=>{O===!0?Q[e.group]=v:Q[e.group]===v&&delete Q[e.group]}),T=j(()=>Q[e.group],(O,be)=>{be===v&&O!==void 0&&O!==v&&q()});m=()=>{a(),T(),Q[e.group]===v&&delete Q[e.group],m=void 0}}function o(){const a={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},T=[s(ee,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&d.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:w.value})];return K.value===!0&&(Object.assign(a,{tabindex:0,...$.value,onClick:P,onKeyup:F}),T.unshift(s("div",{ref:t,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),s(X,a,()=>T)}function I(){let a;return u.header!==void 0?a=[].concat(u.header(U.value)):(a=[s(X,()=>[s(le,{lines:e.labelLines},()=>e.label||""),e.caption?s(le,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&a[e.switchToggleSide===!0?"push":"unshift"](s(X,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>s(ee,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&a[e.switchToggleSide===!0?"unshift":"push"](o()),a}function D(){const a={ref:"item",style:e.headerStyle,class:e.headerClass,dark:c.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return _.value===!0&&(a.clickable=!0,a.onClick=W,Object.assign(a,n.value===!0?b.value:$.value)),s(Pe,a,I)}function he(){return Ie(s("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:C.value,id:r.value},G(u.default)),[[Te,d.value]])}function ve(){const a=[D(),s(Ue,{duration:e.duration,onShow:Z,onHide:p},he)];return e.expandSeparator===!0&&a.push(s(Y,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:c.value}),s(Y,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:c.value})),a}return e.group!==void 0&&M(),ue(()=>{m?.()}),()=>s("div",{class:y.value},[s("div",{class:"q-expansion-item__container relative-position"},ve())])}});function Je(e){const u=new Date,l=new Date(e);new Date().setFullYear(u.getFullYear()-1);const c=new Date;return c.setMonth(u.getMonth()-6),l>u?"green":l>=c?"orange":l<c?"red":""}const Xe={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},et={class:"col"},tt={class:"q-ma-none"},nt={class:"col text-center"},at={class:""},it={class:"col"},ot={class:"absolute-top-right"},lt={key:1,class:"row full-width q-pa-xs"},rt=de({__name:"TableItems",props:["group","filter"],setup(e){const u=e,l=[{name:"image",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"image"},{name:"name",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"name"},{name:"bestTil",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"date_expire"}];function i(c){return pe.formatDate(c,"DD-MM-YYYY")}return(c,d)=>(H(),V(fe,null,[g(Ze,{class:"text-h6 full-width",label:u.group.name,caption:u.group.description,"default-opened":"","expand-icon":"las la-angle-down","expanded-icon":"las la-angle-up"},{default:x(()=>[g(Me,{"hide-bottom":"",grid:"",filter:k(te)().filter,flat:"",rows:k(A)().items.filter(t=>t.group_id===u.group.id),columns:l,"row-key":"name","hide-header":""},{item:x(t=>[L("div",Xe,[g(ze,{bordered:k(Ce)().screen.gt.xs,flat:"",class:"full-height"},{default:x(()=>[g(Fe,{class:"row items-center q-gutter-x-sm"},{default:x(()=>[g(Le,null,{default:x(()=>[g(Ge,{src:t.row.image},null,8,["src"])]),_:2},1024),L("div",et,[L("h5",tt,R(t.row.name),1),L("h6",{class:Be(["q-ma-none text-weight-thin",t.row.description?"":"text-transparent"])},R(t.row.description||"No description available"),3)]),L("div",nt,[L("div",at,[g(re,{style:{"font-size":"11px"}},{default:x(()=>[ie(R(k(A)().getTagName(t.row.tag_id)),1)]),_:2},1024)]),L("div",it,[g(re,{outline:"",color:k(Je)(t.row.date_expire),style:{"font-size":"11px"},class:""},{default:x(()=>[ie(R(i(t.row.date_expire)),1)]),_:2},1032,["color"])])]),L("div",ot,[g(E,{to:"/edit/"+t.row.id,class:"",icon:"las la-edit"},null,8,["to"])])]),_:2},1024),t.row.amount!=0?(H(),ge(Ke,{key:0,class:"row full-width"},{default:x(()=>[g(E,{dense:"",class:"q-px-md",color:"primary",icon:"las la-minus",onClick:r=>t.row.amount=Math.max((t.row.amount||0)-1,0)},null,8,["onClick"]),g(me,{standout:"",dense:"",square:"","input-class":"text-right",suffix:t.row.unit,modelValue:t.row.amount,"onUpdate:modelValue":r=>t.row.amount=r,type:"number",min:"0",class:"col",value:t.row.amount||0},null,8,["suffix","modelValue","onUpdate:modelValue","value"]),g(E,{dense:"",class:"q-px-md",color:"primary",icon:"las la-plus",onClick:r=>t.row.amount=(t.row.amount||0)+1},null,8,["onClick"])]),_:2},1024)):(H(),V("div",lt,[g(E,{class:"col q-mr-md",color:"primary",label:"cancel",onClick:r=>t.row.amount=1},null,8,["onClick"]),g(E,{class:"col",color:"red",label:"delete",onClick:r=>k(A)().deleteItem(t.row.id)},null,8,["onClick"])]))]),_:2},1032,["bordered"])])]),_:1},8,["filter","rows"])]),_:1},8,["label","caption"]),g(Y)],64))}}),gt=de({__name:"HomeView",setup(e){return j(()=>A().isSignedIn,async()=>{await A().fetchAll()}),(u,l)=>(H(),ge(Oe,{class:"q-gutter-y-md"},{default:x(()=>[g(me,{class:"q-ma-lg",outlined:"",rounded:"",dense:"",debounce:"300",modelValue:k(te)().filter,"onUpdate:modelValue":l[0]||(l[0]=i=>k(te)().filter=i),placeholder:"Search"},{append:x(()=>[g(ee,{name:"search"})]),_:1},8,["modelValue"]),(H(!0),V(fe,null,Qe(k(A)().groups,(i,c)=>(H(),V("div",{class:"col row",key:c},[g(Y,{vertical:""}),g(rt,{class:"col full-width fit",group:i},null,8,["group"])]))),128))]),_:1}))}});export{gt as default};
