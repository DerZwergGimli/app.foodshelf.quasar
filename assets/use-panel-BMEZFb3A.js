import{l as W,r as K,J as H,K as J,o as G,g as U,h as A,x as F,af as Z,H as k,p as ee,y as te,au as ne,av as oe,aw as V,ax as T,ay as I,n as ie,az as N,aA as z,aB as re,c as S,w as ae,a9 as ue,aC as se,aD as le}from"./index-CZbSlQss.js";import{w as ce,x as de,e as fe}from"./QDialog-CUPYD09d.js";const xe=W({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:n,emit:a}){const m=U(),h=K(null);let e=0;const o=[];function u(r){const v=typeof r=="boolean"?r:t.noErrorFocus!==!0,x=++e,C=(s,p)=>{a(`validation${s===!0?"Success":"Error"}`,p)},w=s=>{const p=s.validate();return typeof p.then=="function"?p.then(y=>({valid:y,comp:s}),y=>({valid:!1,comp:s,err:y})):Promise.resolve({valid:p,comp:s})};return(t.greedy===!0?Promise.all(o.map(w)).then(s=>s.filter(p=>p.valid!==!0)):o.reduce((s,p)=>s.then(()=>w(p).then(y=>{if(y.valid===!1)return Promise.reject(y)})),Promise.resolve()).catch(s=>[s])).then(s=>{if(s===void 0||s.length===0)return x===e&&C(!0),!0;if(x===e){const{comp:p,err:y}=s[0];if(y!==void 0&&console.error(y),C(!1,p),v===!0){const B=s.find(({comp:q})=>typeof q.focus=="function"&&Z(q.$)===!1);B!==void 0&&B.comp.focus()}}return!1})}function f(){e++,o.forEach(r=>{typeof r.resetValidation=="function"&&r.resetValidation()})}function b(r){r!==void 0&&k(r);const v=e+1;u().then(x=>{v===e&&x===!0&&(t.onSubmit!==void 0?a("submit",r):(r==null?void 0:r.target)!==void 0&&typeof r.target.submit=="function"&&r.target.submit())})}function c(r){r!==void 0&&k(r),a("reset"),ee(()=>{f(),t.autofocus===!0&&t.noResetFocus!==!0&&g()})}function g(){ce(()=>{if(h.value===null)return;const r=h.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||h.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||h.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(h.value.querySelectorAll("[tabindex]"),v=>v.tabIndex!==-1);r==null||r.focus({preventScroll:!0})})}te(ne,{bindComponent(r){o.push(r)},unbindComponent(r){const v=o.indexOf(r);v!==-1&&o.splice(v,1)}});let d=!1;return H(()=>{d=!0}),J(()=>{d===!0&&t.autofocus===!0&&g()}),G(()=>{t.autofocus===!0&&g()}),Object.assign(m.proxy,{validate:u,resetValidation:f,submit:b,reset:c,focus:g,getValidationComponents:()=>o}),()=>A("form",{class:"q-form",ref:h,onSubmit:b,onReset:c},F(n.default))}}),_={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},ve=Object.keys(_);_.all=!0;function R(t){const n={};for(const a of ve)t[a]===!0&&(n[a]=!0);return Object.keys(n).length===0?_:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}const pe=["INPUT","TEXTAREA"];function L(t,n){return n.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof n.handler=="function"&&pe.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(n.uid)===-1)}function me(t){const n=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((a,m)=>{const h=parseFloat(a);h&&(n[m]=h)}),n}const he=oe({name:"touch-swipe",beforeMount(t,{value:n,arg:a,modifiers:m}){if(m.mouse!==!0&&T.has.touch!==!0)return;const h=m.mouseCapture===!0?"Capture":"",e={handler:n,sensitivity:me(a),direction:R(m),noop:ie,mouseStart(o){L(o,e)&&re(o)&&(N(e,"temp",[[document,"mousemove","move",`notPassive${h}`],[document,"mouseup","end","notPassiveCapture"]]),e.start(o,!0))},touchStart(o){if(L(o,e)){const u=o.target;N(e,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),e.start(o)}},start(o,u){T.is.firefox===!0&&I(t,!0);const f=z(o);e.event={x:f.left,y:f.top,time:Date.now(),mouse:u===!0,dir:!1}},move(o){if(e.event===void 0)return;if(e.event.dir!==!1){k(o);return}const u=Date.now()-e.event.time;if(u===0)return;const f=z(o),b=f.left-e.event.x,c=Math.abs(b),g=f.top-e.event.y,d=Math.abs(g);if(e.event.mouse!==!0){if(c<e.sensitivity[1]&&d<e.sensitivity[1]){e.end(o);return}}else if(window.getSelection().toString()!==""){e.end(o);return}else if(c<e.sensitivity[2]&&d<e.sensitivity[2])return;const r=c/u,v=d/u;e.direction.vertical===!0&&c<d&&c<100&&v>e.sensitivity[0]&&(e.event.dir=g<0?"up":"down"),e.direction.horizontal===!0&&c>d&&d<100&&r>e.sensitivity[0]&&(e.event.dir=b<0?"left":"right"),e.direction.up===!0&&c<d&&g<0&&c<100&&v>e.sensitivity[0]&&(e.event.dir="up"),e.direction.down===!0&&c<d&&g>0&&c<100&&v>e.sensitivity[0]&&(e.event.dir="down"),e.direction.left===!0&&c>d&&b<0&&d<100&&r>e.sensitivity[0]&&(e.event.dir="left"),e.direction.right===!0&&c>d&&b>0&&d<100&&r>e.sensitivity[0]&&(e.event.dir="right"),e.event.dir!==!1?(k(o),e.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),de(),e.styleCleanup=x=>{e.styleCleanup=void 0,document.body.classList.remove("non-selectable");const C=()=>{document.body.classList.remove("no-pointer-events--children")};x===!0?setTimeout(C,50):C()}),e.handler({evt:o,touch:e.event.mouse!==!0,mouse:e.event.mouse,direction:e.event.dir,duration:u,distance:{x:c,y:d}})):e.end(o)},end(o){var u;e.event!==void 0&&(V(e,"temp"),T.is.firefox===!0&&I(t,!1),(u=e.styleCleanup)==null||u.call(e,!0),o!==void 0&&e.event.dir!==!1&&k(o),e.event=void 0)}};if(t.__qtouchswipe=e,m.mouse===!0){const o=m.mouseCapture===!0||m.mousecapture===!0?"Capture":"";N(e,"main",[[t,"mousedown","mouseStart",`passive${o}`]])}T.has.touch===!0&&N(e,"main",[[t,"touchstart","touchStart",`passive${m.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,n){const a=t.__qtouchswipe;a!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&a.end(),a.handler=n.value),a.direction=R(n.modifiers))},beforeUnmount(t){var a;const n=t.__qtouchswipe;n!==void 0&&(V(n,"main"),V(n,"temp"),T.is.firefox===!0&&I(t,!1),(a=n.styleCleanup)==null||a.call(n),delete t.__qtouchswipe)}});function ye(){let t=Object.create(null);return{getCache:(n,a)=>t[n]===void 0?t[n]=typeof a=="function"?a():a:t[n],setCache(n,a){t[n]=a},hasCache(n){return Object.hasOwnProperty.call(t,n)},clearCache(n){n!==void 0?delete t[n]:t=Object.create(null)}}}const Pe={name:{required:!0},disable:Boolean},M={setup(t,{slots:n}){return()=>A("div",{class:"q-panel scroll",role:"tabpanel"},F(n.default))}},Ce={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Se=["update:modelValue","beforeTransition","transition"];function Ae(){const{props:t,emit:n,proxy:a}=U(),{getCache:m}=ye(),{registerTimeout:h}=fe();let e,o;const u=K(null),f={value:null};function b(i){const l=t.vertical===!0?"up":"left";E((a.$q.lang.rtl===!0?-1:1)*(i.direction===l?1:-1))}const c=S(()=>[[he,b,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),g=S(()=>t.transitionPrev||`slide-${t.vertical===!0?"down":"right"}`),d=S(()=>t.transitionNext||`slide-${t.vertical===!0?"up":"left"}`),r=S(()=>`--q-transition-duration: ${t.transitionDuration}ms`),v=S(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),x=S(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),C=S(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);ae(()=>t.modelValue,(i,l)=>{const P=p(i)===!0?y(i):-1;o!==!0&&q(P===-1?0:P<y(l)?-1:1),f.value!==P&&(f.value=P,n("beforeTransition",i,l),h(()=>{n("transition",i,l)},t.transitionDuration))});function w(){E(1)}function O(){E(-1)}function s(i){n("update:modelValue",i)}function p(i){return i!=null&&i!==""}function y(i){return e.findIndex(l=>l.props.name===i&&l.props.disable!==""&&l.props.disable!==!0)}function B(){return e.filter(i=>i.props.disable!==""&&i.props.disable!==!0)}function q(i){const l=i!==0&&t.animated===!0&&f.value!==-1?"q-transition--"+(i===-1?g.value:d.value):null;u.value!==l&&(u.value=l)}function E(i,l=f.value){let P=l+i;for(;P!==-1&&P<e.length;){const D=e[P];if(D!==void 0&&D.props.disable!==""&&D.props.disable!==!0){q(i),o=!0,n("update:modelValue",D.props.name),setTimeout(()=>{o=!1});return}P+=i}t.infinite===!0&&e.length!==0&&l!==-1&&l!==e.length&&E(i,i===-1?e.length:-1)}function $(){const i=y(t.modelValue);return f.value!==i&&(f.value=i),!0}function j(){const i=p(t.modelValue)===!0&&$()&&e[f.value];return t.keepAlive===!0?[A(le,x.value,[A(C.value===!0?m(v.value,()=>({...M,name:v.value})):M,{key:v.value,style:r.value},()=>i)])]:[A("div",{class:"q-panel scroll",style:r.value,key:v.value,role:"tabpanel"},[i])]}function X(){if(e.length!==0)return t.animated===!0?[A(ue,{name:u.value},j)]:j()}function Q(i){return e=se(F(i.default,[])).filter(l=>l.props!==null&&l.props.slot===void 0&&p(l.props.name)===!0),e.length}function Y(){return e}return Object.assign(a,{next:w,previous:O,goTo:s}),{panelIndex:f,panelDirectives:c,updatePanelsList:Q,updatePanelIndex:$,getPanelContent:X,getEnabledPanels:B,getPanels:Y,isValidPanelName:p,keepAliveProps:x,needsUniqueKeepAliveWrapper:C,goToPanelByOffset:E,goToPanel:s,nextPanel:w,previousPanel:O}}export{xe as Q,Se as a,Ce as b,Ae as c,ye as d,Pe as u};
