import{Q as N,a as ae,b as J,c as de,d as X,u as fe,e as ve,f as me}from"./QTabPanels-DHXOeu9n.js";import{k as C,g as U,a as K,l as q,m as M,r as y,c as f,w,n as j,p as ge,h as b,q as I,t as oe,u as he,v as ne,x as se,y as pe,o as be,z as ye,A as E,b as we,B as _e,C as Ve,d as B,D as P,E as T,G as H,H as A,I as p,f as u,J as xe,K as Y,Q as k,L as re,M as O,N as ie,O as ue,F as ce,P as Se,R as Le,S as ze,U as Qe,V as $e,W as Te,X as qe,Y as Ce}from"./index-Ci3aV1Np.js";import{s as Pe,g as Re,a as He,b as Be,c as W,Q as Fe,d as ke,e as Z,f as ee,h as F}from"./QDialog-CKft7haM.js";import{Q as Oe}from"./use-panel-CyP61XWI.js";const Ue=C({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:i,emit:o}){const{proxy:{$q:l}}=U(),t=K(M,q);if(t===q)return console.error("QHeader needs to be child of QLayout"),q;const c=y(parseInt(e.heightHint,10)),v=y(!0),r=f(()=>e.reveal===!0||t.view.value.indexOf("H")!==-1||l.platform.is.ios&&t.isContainer.value===!0),n=f(()=>{if(e.modelValue!==!0)return 0;if(r.value===!0)return v.value===!0?c.value:0;const s=c.value-t.scroll.value.position;return s>0?s:0}),g=f(()=>e.modelValue!==!0||r.value===!0&&v.value!==!0),z=f(()=>e.modelValue===!0&&g.value===!0&&e.reveal===!0),L=f(()=>"q-header q-layout__section--marginal "+(r.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(g.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),Q=f(()=>{const s=t.rows.value.top,V={};return s[0]==="l"&&t.left.space===!0&&(V[l.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),s[2]==="r"&&t.right.space===!0&&(V[l.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),V});function m(s,V){t.update("header",s,V)}function x(s,V){s.value!==V&&(s.value=V)}function _({height:s}){x(c,s),m("size",s)}function $(s){z.value===!0&&x(v,!0),o("focusin",s)}w(()=>e.modelValue,s=>{m("space",s),x(v,!0),t.animate()}),w(n,s=>{m("offset",s)}),w(()=>e.reveal,s=>{s===!1&&x(v,e.modelValue)}),w(v,s=>{t.animate(),o("reveal",s)}),w(t.scroll,s=>{e.reveal===!0&&x(v,s.direction==="up"||s.position<=e.revealOffset||s.position-s.inflectionPoint<100)});const R={};return t.instances.header=R,e.modelValue===!0&&m("size",c.value),m("space",e.modelValue),m("offset",n.value),j(()=>{t.instances.header===R&&(t.instances.header=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const s=ge(i.default,[]);return e.elevated===!0&&s.push(b("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),s.push(b(N,{debounce:0,onResize:_})),b("header",{class:L.value,style:Q.value,onFocusin:$},s)}}}),Ee=C({name:"QPageContainer",setup(e,{slots:i}){const{proxy:{$q:o}}=U(),l=K(M,q);if(l===q)return console.error("QPageContainer needs to be child of QLayout"),q;oe(he,!0);const t=f(()=>{const c={};return l.header.space===!0&&(c.paddingTop=`${l.header.size}px`),l.right.space===!0&&(c[`padding${o.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(c.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(c[`padding${o.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),c});return()=>b("div",{class:"q-page-container",style:t.value},I(i.default))}}),Ne=C({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:i,emit:o}){const{proxy:{$q:l}}=U(),t=K(M,q);if(t===q)return console.error("QFooter needs to be child of QLayout"),q;const c=y(parseInt(e.heightHint,10)),v=y(!0),r=y(ne.value===!0||t.isContainer.value===!0?0:window.innerHeight),n=f(()=>e.reveal===!0||t.view.value.indexOf("F")!==-1||l.platform.is.ios&&t.isContainer.value===!0),g=f(()=>t.isContainer.value===!0?t.containerHeight.value:r.value),z=f(()=>{if(e.modelValue!==!0)return 0;if(n.value===!0)return v.value===!0?c.value:0;const a=t.scroll.value.position+g.value+c.value-t.height.value;return a>0?a:0}),L=f(()=>e.modelValue!==!0||n.value===!0&&v.value!==!0),Q=f(()=>e.modelValue===!0&&L.value===!0&&e.reveal===!0),m=f(()=>"q-footer q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(L.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(n.value!==!0?" hidden":""):"")),x=f(()=>{const a=t.rows.value.bottom,h={};return a[0]==="l"&&t.left.space===!0&&(h[l.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),a[2]==="r"&&t.right.space===!0&&(h[l.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),h});function _(a,h){t.update("footer",a,h)}function $(a,h){a.value!==h&&(a.value=h)}function R({height:a}){$(c,a),_("size",a)}function s(){if(e.reveal!==!0)return;const{direction:a,position:h,inflectionPoint:S}=t.scroll.value;$(v,a==="up"||h-S<100||t.height.value-g.value-h-c.value<300)}function V(a){Q.value===!0&&$(v,!0),o("focusin",a)}w(()=>e.modelValue,a=>{_("space",a),$(v,!0),t.animate()}),w(z,a=>{_("offset",a)}),w(()=>e.reveal,a=>{a===!1&&$(v,e.modelValue)}),w(v,a=>{t.animate(),o("reveal",a)}),w([c,t.scroll,t.height],s),w(()=>l.screen.height,a=>{t.isContainer.value!==!0&&$(r,a)});const d={};return t.instances.footer=d,e.modelValue===!0&&_("size",c.value),_("space",e.modelValue),_("offset",z.value),j(()=>{t.instances.footer===d&&(t.instances.footer=void 0,_("size",0),_("offset",0),_("space",!1))}),()=>{const a=se(i.default,[b(N,{debounce:0,onResize:R})]);return e.elevated===!0&&a.push(b("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b("footer",{class:m.value,style:x.value,onFocusin:V},a)}}}),{passive:te}=pe,Ae=["both","horizontal","vertical"],Me=C({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Ae.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:Pe},emits:["scroll"],setup(e,{emit:i}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let l=null,t,c;w(()=>e.scrollTarget,()=>{n(),r()});function v(){l?.();const L=Math.max(0,He(t)),Q=Be(t),m={top:L-o.position.top,left:Q-o.position.left};if(e.axis==="vertical"&&m.top===0||e.axis==="horizontal"&&m.left===0)return;const x=Math.abs(m.top)>=Math.abs(m.left)?m.top<0?"up":"down":m.left<0?"left":"right";o.position={top:L,left:Q},o.directionChanged=o.direction!==x,o.delta=m,o.directionChanged===!0&&(o.direction=x,o.inflectionPoint=o.position),i("scroll",{...o})}function r(){t=Re(c,e.scrollTarget),t.addEventListener("scroll",g,te),g(!0)}function n(){t!==void 0&&(t.removeEventListener("scroll",g,te),t=void 0)}function g(L){if(L===!0||e.debounce===0||e.debounce==="0")v();else if(l===null){const[Q,m]=e.debounce?[setTimeout(v,e.debounce),clearTimeout]:[requestAnimationFrame(v),cancelAnimationFrame];l=()=>{m(Q),l=null}}}const{proxy:z}=U();return w(()=>z.$q.lang.rtl,v),be(()=>{c=z.$el.parentNode,r()}),j(()=>{l?.(),n()}),Object.assign(z,{trigger:g,getPosition:()=>o}),ye}}),Ie=C({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:i,emit:o}){const{proxy:{$q:l}}=U(),t=y(null),c=y(l.screen.height),v=y(e.container===!0?0:l.screen.width),r=y({position:0,direction:"down",inflectionPoint:0}),n=y(0),g=y(ne.value===!0?0:W()),z=f(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),L=f(()=>e.container===!1?{minHeight:l.screen.height+"px"}:null),Q=f(()=>g.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${g.value}px`}:null),m=f(()=>g.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${g.value}px`,width:`calc(100% + ${g.value}px)`}:null);function x(d){if(e.container===!0||document.qScrollPrevented!==!0){const a={position:d.position.top,direction:d.direction,directionChanged:d.directionChanged,inflectionPoint:d.inflectionPoint.top,delta:d.delta.top};r.value=a,e.onScroll!==void 0&&o("scroll",a)}}function _(d){const{height:a,width:h}=d;let S=!1;c.value!==a&&(S=!0,c.value=a,e.onScrollHeight!==void 0&&o("scrollHeight",a),R()),v.value!==h&&(S=!0,v.value=h),S===!0&&e.onResize!==void 0&&o("resize",d)}function $({height:d}){n.value!==d&&(n.value=d,R())}function R(){if(e.container===!0){const d=c.value>n.value?W():0;g.value!==d&&(g.value=d)}}let s=null;const V={instances:{},view:f(()=>e.view),isContainer:f(()=>e.container),rootRef:t,height:c,containerHeight:n,scrollbarWidth:g,totalWidth:f(()=>v.value+g.value),rows:f(()=>{const d=e.view.toLowerCase().split(" ");return{top:d[0].split(""),middle:d[1].split(""),bottom:d[2].split("")}}),header:E({size:0,offset:0,space:!1}),right:E({size:300,offset:0,space:!1}),footer:E({size:0,offset:0,space:!1}),left:E({size:300,offset:0,space:!1}),scroll:r,animate(){s!==null?clearTimeout(s):document.body.classList.add("q-body--layout-animate"),s=setTimeout(()=>{s=null,document.body.classList.remove("q-body--layout-animate")},155)},update(d,a,h){V[d][a]=h}};if(oe(M,V),W()>0){let d=function(){S=null,D.classList.remove("hide-scrollbar")},a=function(){if(S===null){if(D.scrollHeight>l.screen.height)return;D.classList.add("hide-scrollbar")}else clearTimeout(S);S=setTimeout(d,300)},h=function(G){S!==null&&G==="remove"&&(clearTimeout(S),d()),window[`${G}EventListener`]("resize",a)},S=null;const D=document.body;w(()=>e.container!==!0?"add":"remove",h),e.container!==!0&&h("add"),we(()=>{h("remove")})}return()=>{const d=se(i.default,[b(Me,{onScroll:x}),b(N,{onResize:_})]),a=b("div",{class:z.value,style:L.value,ref:e.container===!0?void 0:t,tabindex:-1},d);return e.container===!0?b("div",{class:"q-layout-container overflow-hidden",ref:t},[b(N,{onResize:$}),b("div",{class:"absolute-full",style:Q.value},[b("div",{class:"scroll",style:m.value},[a])])]):a}}}),De=C({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:i}){const o=f(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>b("div",{class:o.value},I(i.default))}}),We=C({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:i}){const o=f(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>b("div",{class:o.value,role:"toolbar"},I(i.default))}}),le=C({name:"QCardActions",props:{..._e,vertical:Boolean},setup(e,{slots:i}){const o=Ve(e),l=f(()=>`q-card__actions ${o.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>b("div",{class:l.value},I(i.default))}}),Ke={class:"q-gutter-y-md"},je=B({__name:"LoginDialog",setup(e){const i=y("login"),o=y(""),l=y(""),t=y("");async function c(){await O().login(l.value,t.value)}return(v,r)=>(T(),P(Fe,{modelValue:H(A)().show_login,"onUpdate:modelValue":r[8]||(r[8]=n=>H(A)().show_login=n)},{default:p(()=>[u(ke,{flat:"",bordered:"",style:{"min-width":"350px"}},{default:p(()=>[u(ae,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=n=>i.value=n)},{default:p(()=>[u(J,{name:"login",label:"Login"}),u(J,{name:"signup",label:"Sign Up"})]),_:1},8,["modelValue"]),u(Z),u(de,{modelValue:i.value,"onUpdate:modelValue":r[7]||(r[7]=n=>i.value=n),animated:""},{default:p(()=>[u(X,{name:"login"},{default:p(()=>[u(Oe,{onSubmit:r[3]||(r[3]=xe(n=>c(),["prevent"]))},{default:p(()=>[u(ee,null,{default:p(()=>[Y("div",Ke,[u(F,{rules:[n=>n&&n.length>0&&n.includes(["@"])||"Please enter an email"],modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=n=>l.value=n),outlined:"","lazy-rules":"",dense:"",label:"Email",type:"email"},null,8,["rules","modelValue"]),u(F,{rules:[n=>n&&n.length>0||"Please enter a password"],modelValue:t.value,"onUpdate:modelValue":r[2]||(r[2]=n=>t.value=n),outlined:"","lazy-rules":"",dense:"",label:"Password",type:"password"},null,8,["rules","modelValue"])]),u(k,{class:"text-secondary"},{default:p(()=>r[9]||(r[9]=[re("Forgot Password?")])),_:1})]),_:1}),u(le,{align:"right"},{default:p(()=>[u(k,{type:"submit",class:"full-width",label:"Login",color:"primary"})]),_:1})]),_:1})]),_:1}),u(X,{name:"signup"},{default:p(()=>[u(ee,null,{default:p(()=>[r[10]||(r[10]=Y("div",{class:"text-h6"},"Sign Up",-1)),u(F,{modelValue:o.value,"onUpdate:modelValue":r[4]||(r[4]=n=>o.value=n),filled:"",label:"Name",type:"text",class:"q-mb-md"},null,8,["modelValue"]),u(F,{modelValue:l.value,"onUpdate:modelValue":r[5]||(r[5]=n=>l.value=n),filled:"",label:"Email",type:"email",class:"q-mb-md"},null,8,["modelValue"]),u(F,{modelValue:t.value,"onUpdate:modelValue":r[6]||(r[6]=n=>t.value=n),t:"",filled:"",label:"Password",type:"password",class:"q-mb-md"},null,8,["modelValue"])]),_:1}),u(le,{align:"right"},{default:p(()=>[u(k,{flat:"",label:"Sign Up",color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),u(Z)]),_:1})]),_:1},8,["modelValue"]))}});async function Ge(){try{const{error:e}=await O().supabase.auth.signOut();if(e)return{status:"ERROR",message:e.message}}catch{return{status:"ERROR",message:"An unexpected error occurred. Please try again."}}return{status:"OK",message:"Logout successful!"}}const Je=B({__name:"LoginButtton",setup(e){const i=f(()=>O().isSignedIn?"Logout":"Login");async function o(){if(O().isSignedIn){const l=await Ge();Se(l),await O().loadUser()}else A().show_login=!0}return(l,t)=>(T(),ie(ce,null,[u(k,{icon:i.value=="Login"?"las la-sign-in-alt":"las la-sign-out-alt",label:i.value,color:"primary",onClick:t[0]||(t[0]=c=>o())},null,8,["icon","label"]),H(A)().show_login?(T(),P(je,{key:0})):ue("",!0)],64))}}),Xe=B({__name:"HeaderLayout",setup(e){const i=Le();return(o,l)=>(T(),P(We,null,{default:p(()=>[H(ze)().path.includes("edit")?(T(),P(k,{key:0,flat:"",icon:"las la-chevron-left",onClick:l[0]||(l[0]=t=>H(i).push("/"))})):ue("",!0),u(De,{onClick:l[1]||(l[1]=t=>H(i).push("/")),class:""},{default:p(()=>l[2]||(l[2]=[re(" FoodTrack ")])),_:1}),u(Je,{class:""})]),_:1}))}}),Ye=C({name:"QRouteTab",props:{...Qe,...fe},emits:ve,setup(e,{slots:i,emit:o}){const l=$e({useDisableForRouterLinkProps:!1}),{renderTab:t,$tabs:c}=me(e,i,o,{exact:f(()=>e.exact),...l});return w(()=>`${e.name} | ${e.exact} | ${(l.resolvedLink.value||{}).href}`,c.verifyRouteModel),()=>t(l.linkTag.value,l.linkAttrs.value)}}),Ze=B({__name:"NavigationBar",props:["links"],setup(e){const i=e;return(o,l)=>(T(),P(ae,{dense:"",flat:"",bordered:"","indicator-color":"transparent"},{default:p(()=>[(T(!0),ie(ce,null,Te(i.links,t=>(T(),P(Ye,qe({key:t.title,ref_for:!0},t,{clickable:"",tag:"a",to:t.to,name:t.title,icon:t.icon,label:t.title}),null,16,["to","name","icon","label"]))),128))]),_:1}))}}),et=B({__name:"FooterLayout",setup(e){const i=[{title:"Home",icon:"las la-home",to:"/"},{title:"Add",icon:"las la-plus",to:"/add"},{title:"About",icon:"las la-info",to:"/about"}];return(o,l)=>(T(),P(Ze,{links:i}))}}),nt=B({__name:"MainLayout",setup(e){return(i,o)=>{const l=Ce("router-view");return T(),P(Ie,{view:"lHh Lpr lFf"},{default:p(()=>[u(Ue,{class:""},{default:p(()=>[u(Xe)]),_:1}),u(Ee,null,{default:p(()=>[u(l)]),_:1}),u(Ne,null,{default:p(()=>[u(et)]),_:1})]),_:1})}}});export{nt as default};
