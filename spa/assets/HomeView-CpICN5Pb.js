import{c as m,k as A,r as k,v as ve,o as he,h as l,Z as oe,q as ee,_ as be,w as E,$ as K,g as re,n as ue,a0 as Se,U as se,a1 as _e,a2 as we,a3 as Z,a4 as ye,d as ce,N as J,E as $,F as de,f as g,I as x,G as P,M as D,K as L,D as X,a5 as xe,a6 as M,a7 as qe,O as Ie,L as te,Q as j,W as Te}from"./index-Ci3aV1Np.js";import{u as ne,i as ke,j as Ce,k as Le,l as Be,m as Qe,n as Ne,o as $e,e as p,d as De,f as je,h as ae}from"./QDialog-CKft7haM.js";import{Q as Ee,a as ie,b as W,c as le,d as Ae}from"./date-oIE_Lz-S.js";import{Q as He}from"./QTable-Bpp_g_Sc.js";const Oe={ratio:[String,Number]};function Ve(e,u){return m(()=>{const d=Number(e.ratio||(u!==void 0?u.value:void 0));return isNaN(d)!==!0&&d>0?{paddingBottom:`${100/d}%`}:null})}const Re=1.7778,ze=A({name:"QImg",props:{...Oe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Re},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:u,emit:d}){const o=k(e.initialRatio),s=Ve(e,o),r=re(),{registerTimeout:v,removeTimeout:t}=ne(),{registerTimeout:c,removeTimeout:q}=ne(),S=m(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),h=m(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),f=[k(null),k(S.value)],_=k(0),C=k(!1),n=k(!1),b=m(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),w=m(()=>({width:e.width,height:e.height})),y=m(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),F=m(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function Y(){if(q(),e.loadingShowDelay===0){C.value=!0;return}c(()=>{C.value=!0},e.loadingShowDelay)}function Q(){q(),C.value=!1}function G({target:i}){K(r)===!1&&(t(),o.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,H(i,1))}function H(i,I){I===1e3||K(r)===!0||(i.complete===!0?O(i):v(()=>{H(i,I+1)},50))}function O(i){K(r)!==!0&&(_.value=_.value^1,f[_.value].value=null,Q(),i.getAttribute("__qerror")!=="true"&&(n.value=!1),d("load",i.currentSrc||i.src))}function U(i){t(),Q(),n.value=!0,f[_.value].value=h.value,f[_.value^1].value=S.value,d("error",i)}function V(i){const I=f[i].value,N={key:"img_"+i,class:y.value,style:F.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...I};return _.value===i?Object.assign(N,{class:N.class+"current",onLoad:G,onError:U}):N.class+="loaded",l("div",{class:"q-img__container absolute-full",key:"img"+i},l("img",N))}function R(){return C.value===!1?l("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ee(u[n.value===!0?"error":"default"])):l("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},u.loading!==void 0?u.loading():e.noSpinner===!0?void 0:[l(be,{color:e.spinnerColor,size:e.spinnerSize})])}{let i=function(){E(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,I=>{t(),n.value=!1,I===null?(Q(),f[_.value^1].value=S.value):Y(),f[_.value].value=I},{immediate:!0})};ve.value===!0?he(i):i()}return()=>{const i=[];return s.value!==null&&i.push(l("div",{key:"filler",style:s.value})),f[0].value!==null&&i.push(V(0)),f[1].value!==null&&i.push(V(1)),i.push(l(oe,{name:"q-transition--fade"},R)),l("div",{key:"main",class:b.value,style:w.value,role:"img","aria-label":e.alt},i)}}}),Me=A({name:"QSpace",setup(){const e=l("div",{class:"q-space"});return()=>e}}),Pe=A({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:u}){const d=m(()=>{const o=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(s=>e[s]===!0).map(s=>`q-btn-group--${s}`).join(" ");return`q-btn-group row no-wrap${o.length!==0?" "+o:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>l("div",{class:d.value},ee(u.default))}}),Fe=A({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:u,emit:d}){let o=!1,s,r,v=null,t=null,c,q;function S(){s?.(),s=null,o=!1,v!==null&&(clearTimeout(v),v=null),t!==null&&(clearTimeout(t),t=null),r?.removeEventListener("transitionend",c),c=null}function h(n,b,w){b!==void 0&&(n.style.height=`${b}px`),n.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,o=!0,s=w}function f(n,b){n.style.overflowY=null,n.style.height=null,n.style.transition=null,S(),b!==q&&d(b)}function _(n,b){let w=0;r=n,o===!0?(S(),w=n.offsetHeight===n.scrollHeight?0:void 0):(q="hide",n.style.overflowY="hidden"),h(n,w,b),v=setTimeout(()=>{v=null,n.style.height=`${n.scrollHeight}px`,c=y=>{t=null,(Object(y)!==y||y.target===n)&&f(n,"show")},n.addEventListener("transitionend",c),t=setTimeout(c,e.duration*1.1)},100)}function C(n,b){let w;r=n,o===!0?S():(q="show",n.style.overflowY="hidden",w=n.scrollHeight),h(n,w,b),v=setTimeout(()=>{v=null,n.style.height=0,c=y=>{t=null,(Object(y)!==y||y.target===n)&&f(n,"hide")},n.addEventListener("transitionend",c),t=setTimeout(c,e.duration*1.1)},100)}return ue(()=>{o===!0&&S()}),()=>l(oe,{css:!1,appear:e.appear,onEnter:_,onLeave:C},u.default)}}),B=Se({}),Ye=Object.keys(se),Ge=A({name:"QExpansionItem",props:{...se,...Le,...Ce,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ke,"click","afterShow","afterHide"],setup(e,{slots:u,emit:d}){const{proxy:{$q:o}}=re(),s=Be(e,o),r=k(e.modelValue!==null?e.modelValue:e.defaultOpened),v=k(null),t=Qe(),{show:c,hide:q,toggle:S}=Ne({showing:r});let h,f;const _=m(()=>`q-expansion-item q-item-type q-expansion-item--${r.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),C=m(()=>e.contentInsetLevel===void 0?null:{["padding"+(o.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),n=m(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),b=m(()=>{const a={};return Ye.forEach(T=>{a[T]=e[T]}),a}),w=m(()=>n.value===!0||e.expandIconToggle!==!0),y=m(()=>e.expandedIcon!==void 0&&r.value===!0?e.expandedIcon:e.expandIcon||o.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),F=m(()=>e.disable!==!0&&(n.value===!0||e.expandIconToggle===!0)),Y=m(()=>({expanded:r.value===!0,detailsId:t.value,toggle:S,show:c,hide:q})),Q=m(()=>{const a=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:o.lang.label[r.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":r.value===!0?"true":"false","aria-controls":t.value,"aria-label":a}});E(()=>e.group,a=>{f?.(),a!==void 0&&R()});function G(a){n.value!==!0&&S(a),d("click",a)}function H(a){a.keyCode===13&&O(a,!0)}function O(a,T){T!==!0&&a.qAvoidFocus!==!0&&v.value?.focus(),S(a),ye(a)}function U(){d("afterShow")}function V(){d("afterHide")}function R(){h===void 0&&(h=$e()),r.value===!0&&(B[e.group]=h);const a=E(r,z=>{z===!0?B[e.group]=h:B[e.group]===h&&delete B[e.group]}),T=E(()=>B[e.group],(z,fe)=>{fe===h&&z!==void 0&&z!==h&&q()});f=()=>{a(),T(),B[e.group]===h&&delete B[e.group],f=void 0}}function i(){const a={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},T=[l(Z,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&r.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:y.value})];return F.value===!0&&(Object.assign(a,{tabindex:0,...Q.value,onClick:O,onKeyup:H}),T.unshift(l("div",{ref:v,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),l(W,a,()=>T)}function I(){let a;return u.header!==void 0?a=[].concat(u.header(Y.value)):(a=[l(W,()=>[l(ie,{lines:e.labelLines},()=>e.label||""),e.caption?l(ie,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&a[e.switchToggleSide===!0?"push":"unshift"](l(W,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>l(Z,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&a[e.switchToggleSide===!0?"unshift":"push"](i()),a}function N(){const a={ref:"item",style:e.headerStyle,class:e.headerClass,dark:s.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return w.value===!0&&(a.clickable=!0,a.onClick=G,Object.assign(a,n.value===!0?b.value:Q.value)),l(Ee,a,I)}function ge(){return _e(l("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:C.value,id:t.value},ee(u.default)),[[we,r.value]])}function me(){const a=[N(),l(Fe,{duration:e.duration,onShow:U,onHide:V},ge)];return e.expandSeparator===!0&&a.push(l(p,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),l(p,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),a}return e.group!==void 0&&R(),ue(()=>{f?.()}),()=>l("div",{class:_.value},[l("div",{class:"q-expansion-item__container relative-position"},me())])}}),Ue={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Ke={class:"col"},We={class:"q-ma-none"},Ze={class:"row justify-end"},Je={class:"col justify-end"},Xe={class:"absolute-top-right"},pe={key:1,class:"row full-width q-pa-xs"},et=ce({__name:"TableItems",props:["group"],setup(e){const u=e,d=[{name:"image",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"image"},{name:"name",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"name"},{name:"bestTil",required:!0,label:"Dessert (100g serving)",sortable:!0,field:"date_expire"}],o=k();function s(r){return Ae.formatDate(r,"DD-MM-YYYY")}return(r,v)=>($(),J(de,null,[g(Ge,{class:"text-h6",label:u.group.name,caption:u.group.description,"default-opened":""},{default:x(()=>[g(He,{class:"q-mb-md","hide-bottom":"",grid:"",filter:o.value,flat:"",rows:P(D)().items.filter(t=>t.group_id===u.group.id),columns:d,"row-key":"name","hide-header":""},{top:x(()=>[g(ae,{class:"full-width",outlined:"",rounded:"",dense:"",debounce:"300",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=t=>o.value=t),placeholder:"Search"},{append:x(()=>[g(Z,{name:"search"})]),_:1},8,["modelValue"])]),item:x(t=>[L("div",Ue,[g(De,{flat:"",bordered:"",class:"full-height"},{default:x(()=>[g(je,{class:"row items-center q-gutter-x-sm"},{default:x(()=>[g(xe,null,{default:x(()=>[g(ze,{src:t.row.image},null,8,["src"])]),_:2},1024),L("div",Ke,[L("h5",We,M(t.row.name),1),L("h6",{class:qe(["q-ma-none text-weight-thin",t.row.description?"":"text-transparent"])},M(t.row.description||"No description available"),3)]),L("div",Ze,[g(Me),L("div",Je,[g(le,{outline:"",style:{"font-size":"11px"},class:""},{default:x(()=>[te(M(s(t.row.date_expire)),1)]),_:2},1024),t.row.tag?($(),X(le,{key:0},{default:x(()=>[te(M(P(D)().getTagName(t.row.tag)),1)]),_:2},1024)):Ie("",!0)])]),L("div",Xe,[g(j,{to:"/edit/"+t.row.id,class:"",icon:"las la-edit"},null,8,["to"])])]),_:2},1024),t.row.amount!=0?($(),X(Pe,{key:0,class:"row full-width"},{default:x(()=>[g(j,{color:"primary",icon:"las la-minus",onClick:c=>t.row.amount=Math.max((t.row.amount||0)-1,0)},null,8,["onClick"]),g(ae,{standout:"",dense:"",square:"","input-class":"text-right",suffix:t.row.unit,modelValue:t.row.amount,"onUpdate:modelValue":c=>t.row.amount=c,type:"number",min:"0",class:"col",value:t.row.amount||0},null,8,["suffix","modelValue","onUpdate:modelValue","value"]),g(j,{color:"primary",icon:"las la-plus",onClick:c=>t.row.amount=(t.row.amount||0)+1},null,8,["onClick"])]),_:2},1024)):($(),J("div",pe,[g(j,{class:"col q-mr-md",color:"primary",label:"cancel",onClick:c=>t.row.amount=1},null,8,["onClick"]),g(j,{class:"col",color:"red",label:"delete",onClick:c=>P(D)().deleteItem(t.row.id)},null,8,["onClick"])]))]),_:2},1024)])]),_:1},8,["filter","rows"])]),_:1},8,["label","caption"]),g(p)],64))}}),lt=ce({__name:"HomeView",setup(e){return E(()=>D().isSignedIn,async()=>{await D().fetchAll()}),(u,d)=>($(!0),J(de,null,Te(P(D)().groups,(o,s)=>($(),X(et,{class:"q-mb-md",group:o,key:s},null,8,["group"]))),128))}});export{lt as default};
